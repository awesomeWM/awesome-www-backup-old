<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>Awesome 3 configuration/zh-hans - awesome</title>
<meta name="generator" content="MediaWiki 1.24.2" />
<meta name="robots" content="noindex,follow" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="/w/index.php?title=Awesome_3_configuration/zh-hans&amp;action=edit" />
<link rel="edit" title="Edit" href="/w/index.php?title=Awesome_3_configuration/zh-hans&amp;action=edit" />
<link rel="shortcut icon" href="/images/icons/aw_16.png" />
<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="awesome (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://awesomewm.org/w/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="/wiki/Awesome_3_configuration/zh-hans" />
<link rel="copyright" href="https://creativecommons.org/licenses/by/3.0/" />
<link rel="alternate" type="application/atom+xml" title="awesome Atom feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="https://awesomewm.org/w/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;printable=1&amp;skin=monobook&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="https://awesomewm.org/w/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;printable=1&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: awesome:resourceloader:filter:minify-css:7:ad506c29508072131b881ff3f2f9d363 */</style>
<script src="https://awesomewm.org/w/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;printable=1&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Awesome_3_configuration/zh-hans","wgTitle":"Awesome 3 configuration/zh-hans","wgCurRevisionId":4827,"wgRevisionId":4827,"wgArticleId":269,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Awesome3"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Awesome_3_configuration/zh-hans","wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":1,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":0,"shownumberswatching":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":5,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":1,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"watchrollback":0,
"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});},{},{});
/* cache key: awesome:resourceloader:filter:minify-js:7:ab52f6eb1652fbc58fa39bdfdc3926f5 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Awesome_3_configuration_zh-hans skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p><b>This wiki will shut down!</b>
</p><p>Please note that this wiki will be made read-only and eventually be taken offline.
</p><p>A replacement is being discussed at <a rel="nofollow" class="external free" href="https://github.com/awesomeWM/awesome-www/issues/7">https://github.com/awesomeWM/awesome-www/issues/7</a>. We'd be happy to have more input for that discussion and volunteers who help us migrate the content of this wiki to its replacement.
</p></div></div>
				<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Awesome 3 configuration/zh-hans</span></h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From awesome</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="LanguageLinks">
<table width="100%">
<tr valign="top" style="background: #EEF3E2">
<td style="width: 25px; padding-left: 0.5em;"><img alt="Languages" src="/w/images/thumb/Geographylogo.png/25px-Geographylogo.png" width="25" height="25" srcset="/w/images/thumb/Geographylogo.png/38px-Geographylogo.png 1.5x, /w/images/Geographylogo.png 2x" /></td>
<td style="width: 10px; white-space: nowrap; padding: 4px 1em 0 0.5em; border-right: 1px solid #aaaaaa;"><b>Languages:</b>&#160;</td><td style="padding: 1px 1em 0; background: #F6F9ED;">
<p><b><a href="/wiki/Awesome_3_configuration" title="Awesome 3 configuration">English</a></b>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
&#160;&#8226;&#160;<span lang="es"><a href="/wiki/Awesome_3_configuration/es" title="Awesome 3 configuration/es">español</a></span>
<span></span>
<span></span>
&#160;&#8226;&#160;<span lang="fr"><a href="/wiki/Awesome_3_configuration/fr" title="Awesome 3 configuration/fr">français</a></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
&#160;&#8226;&#160;<span lang="it"><a href="/wiki/Awesome_3_configuration/it" title="Awesome 3 configuration/it">italiano</a></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
&#160;&#8226;&#160;<span lang="ru"><a href="/wiki/Awesome_3_configuration/ru" title="Awesome 3 configuration/ru">русский</a></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
<span></span>
&#160;&#8226;&#160;<span lang="zh-hans"><strong class="selflink">中文（简体）‎</strong></span>
<span></span>
<span></span>
</p>
</td></tr></table></div>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#.E8.83.8C.E6.99.AF"><span class="tocnumber">1</span> <span class="toctext">背景</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#.E9.85.8D.E7.BD.AE.E6.96.87.E4.BB.B6"><span class="tocnumber">2</span> <span class="toctext">配置文件</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Lua_.E8.AF.AD.E8.A8.80.E5.9F.BA.E7.A1.80"><span class="tocnumber">3</span> <span class="toctext">Lua 语言基础</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#awesome_.E5.AF.B9.E8.B1.A1.E7.B1.BB.E5.9E.8B"><span class="tocnumber">4</span> <span class="toctext">awesome 对象类型</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Screen_.E5.B1.8F.E5.B9.95"><span class="tocnumber">4.1</span> <span class="toctext">Screen 屏幕</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Client_.E5.AE.A2.E6.88.B7"><span class="tocnumber">4.2</span> <span class="toctext">Client 客户</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Tag_.E6.A0.87.E7.AD.BE"><span class="tocnumber">4.3</span> <span class="toctext">Tag 标签</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Widget_.E9.9B.B6.E4.BB.B6"><span class="tocnumber">4.4</span> <span class="toctext">Widget 零件</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Titlebar_.E6.A0.87.E9.A2.98.E6.A0.8F"><span class="tocnumber">4.5</span> <span class="toctext">Titlebar 标题栏</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Statusbar_.E7.8A.B6.E6.80.81.E6.A0.8F"><span class="tocnumber">4.6</span> <span class="toctext">Statusbar 状态栏</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#.E5.BB.BA.E9.80.A0.E6.88.91.E4.BB.AC.E7.9A.84.E7.95.8C.E9.9D.A2"><span class="tocnumber">5</span> <span class="toctext">建造我们的界面</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#.E6.A0.87.E7.AD.BE.E7.9A.84.E5.88.9B.E5.BB.BA"><span class="tocnumber">5.1</span> <span class="toctext">标签的创建</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#.E5.AE.A2.E6.88.B7.E7.9A.84.E6.93.8D.E6.8E.A7"><span class="tocnumber">5.2</span> <span class="toctext">客户的操控</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#.E9.9B.B6.E4.BB.B6.E7.9A.84.E5.88.9B.E5.BB.BA"><span class="tocnumber">5.3</span> <span class="toctext">零件的创建</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#.E7.8A.B6.E6.80.81.E6.A0.8F.E7.9A.84.E5.88.9B.E5.BB.BA"><span class="tocnumber">5.4</span> <span class="toctext">状态栏的创建</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#.E6.A0.87.E9.A2.98.E6.A0.8F.E7.9A.84.E5.88.9B.E5.BB.BA"><span class="tocnumber">5.5</span> <span class="toctext">标题栏的创建</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#.E9.92.A9.E5.AD.90.E7.9A.84.E4.BD.BF.E7.94.A8"><span class="tocnumber">5.6</span> <span class="toctext">钩子的使用</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#.E6.89.A7.E8.A1.8C.E5.91.BD.E4.BB.A4.E6.88.96.E8.84.9A.E6.9C.AC"><span class="tocnumber">5.7</span> <span class="toctext">执行命令或脚本</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#awesome_Lua_.E5.BA.93"><span class="tocnumber">6</span> <span class="toctext">awesome Lua 库</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#awful"><span class="tocnumber">6.1</span> <span class="toctext">awful</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#beautiful"><span class="tocnumber">6.2</span> <span class="toctext">beautiful</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#eminent"><span class="tocnumber">6.3</span> <span class="toctext">eminent</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#naughty"><span class="tocnumber">6.4</span> <span class="toctext">naughty</span></a></li>
<li class="toclevel-2 tocsection-24"><a href="#wicked"><span class="tocnumber">6.5</span> <span class="toctext">wicked</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id=".E8.83.8C.E6.99.AF">背景</span></h1>
<p><b>awesome 3</b> 现在开始使用一个基于 <a rel="nofollow" class="external text" href="http://www.lua.org">Lua</a> 语言的配置文件。很多从 awesome 2 迁移过来的用户都将痛苦的发现，使用 libconfuse 格式的旧配置文件已经消失了，还有些人或许会不舒服，因为他们不理解 <a rel="nofollow" class="external text" href="http://modeemi.fi/~tuomov/ion/">ion</a> 配置文件。但是我不会。
</p><p>为什么选择 Lua 语言？
因为它丰富的可操控性。例如: 你希望 awesome 在某件事发生时作某事，在以前这是无法实现的。但是现在可以了。你几乎可以做 <b>任何事</b> (仅限于一个窗口管理器能做的事)。
</p>
<h1><span class="mw-headline" id=".E9.85.8D.E7.BD.AE.E6.96.87.E4.BB.B6">配置文件</span></h1>
<ul><li> ~/.config/awesome/rc.lua</li>
<li> /etc/xdg/awesome/rc.lua</li></ul>
<h1><span class="mw-headline" id="Lua_.E8.AF.AD.E8.A8.80.E5.9F.BA.E7.A1.80">Lua 语言基础</span></h1>
<p>我们正在讨论 Lua 语言，所以首先，学习 Lua 语言。你不想？那么请不要使用 awesome 3 并且立即停止浏览。(还有一个解决办法就是，从源代码或者其他人哪里获得一份配置文件，然后进行微调，用不到任何 Lua 语言的知识)。
</p><p>对坚持浏览的用户说一声，很好！Lua 语言是一种 <b>简单</b> 的语言。但另一方面，如果你对计算机语言一点也不熟悉，比如说，你不知道 <i>对象</i>，<i>方法</i> 还有 <i>参数</i> 是什么意思，那么，你是很难理解这份文档的，请先学习一些基础知识后再来。
</p><p>我是精英主义者: awesome 3 被设计给拥有最低限度计算机科学知识的进阶用户。但是如果你非常有积极性，你可以学会足够的基础知识配置和操控 awesome。
</p><p>学习 Lua 语言最好的方法是花一两个小时阅读 <a rel="nofollow" class="external text" href="http://www.lua.org/pil/">Programming In Lua</a> 这本书，通过这本书你将对 Lua 的用法有一个大概的认知。Do not hesitate to bookmark important pages talking about flow control, useful statements, etc. That will help: it's awful to look for the for syntax when trying to type lines of code.
</p>
<h1><span class="mw-headline" id="awesome_.E5.AF.B9.E8.B1.A1.E7.B1.BB.E5.9E.8B">awesome 对象类型</span></h1>
<p>对于那些未曾使用过awesome的来自外太空的人来说，以下是一些awesome提供的，你即将对其控制的基本对象。
</p>
<h2><span class="mw-headline" id="Screen_.E5.B1.8F.E5.B9.95">Screen 屏幕</span></h2>
<p>在 awesome 里并没有屏幕(Screen)这个对象，但我们稍后会讨论它。一个屏幕代表了一个和你电脑相连接的物理显示器。它们由索引标识，起始索引是1。
</p>
<h2><span class="mw-headline" id="Client_.E5.AE.A2.E6.88.B7">Client 客户</span></h2>
<p>一个客户(Client)代表一个窗口。我想我已经说清楚了。
</p>
<h2><span class="mw-headline" id="Tag_.E6.A0.87.E7.AD.BE">Tag 标签</span></h2>
<p>一个标签(Tag)就好像一个工作区或者一个虚拟桌面，但是更加灵活。
每一个客户(Client)都可以被分配(至少)一个标签。每一个屏幕(Screen)都可以被分配(至少)一个标签。
任何时候，在一个屏幕，你可以查看任何标签。查看空标签的话将隐藏所有客户。查看一个或多个标签的话将把分配了这些标签的客户都显示给你。
</p>
<h2><span class="mw-headline" id="Widget_.E9.9B.B6.E4.BB.B6">Widget 零件</span></h2>
<p>零件就是可以在屏幕上绘制出来的对象。现有几种类型的零件。例如在屏幕上绘制文本的文本零件，在屏幕上绘制图标的图标零件。
</p>
<h2><span class="mw-headline" id="Titlebar_.E6.A0.87.E9.A2.98.E6.A0.8F">Titlebar 标题栏</span></h2>
<p>标题栏就是附属在客户周围的栏。你可以把零件放置在其中。
</p>
<h2><span class="mw-headline" id="Statusbar_.E7.8A.B6.E6.80.81.E6.A0.8F">Statusbar 状态栏</span></h2>
<p>状态栏就是固定在屏幕边缘的栏。你可以把零件放置在其中。
</p>
<h1><span class="mw-headline" id=".E5.BB.BA.E9.80.A0.E6.88.91.E4.BB.AC.E7.9A.84.E7.95.8C.E9.9D.A2">建造我们的界面</span></h1>
<p>为了建造我们的界面，我们需要用到 awesome 的函数和方法: <b>所有这些</b> 都已经整理成文档 <a rel="nofollow" class="external text" href="http://awesome.naquadah.org/apidoc/">Lua API 文档</a> 和 awesomerc(5) 系统帮助手册。阅读它们，它们是你开发的参考资料。我重复: 阅读它们，所有函数和方法都被整理到系统帮助手册和 lua 文档。
</p><p>系统帮助手册在哪里？…… awesomerc(5)。很好，你找到了。
</p>
<h2><span class="mw-headline" id=".E6.A0.87.E7.AD.BE.E7.9A.84.E5.88.9B.E5.BB.BA">标签的创建</span></h2>
<p>如果你在启动 awesome 时没有设置任何 Lua 动作，你将拥有 0 个标签，这是错误的。awesome 需要至少一个标签。
</p><p>所以首先，我们需要创建一个标签。我们该怎么做呢？我们在文档和系统帮助手册中找到创建标签的函数 tag()。它显示这个函数的参数必须是一个 table，而且这个 table 至少有一个 name 属性。让我们这么做。
</p>
<pre>mytagone = tag({ name = "one" })
</pre>
<p>现在你将一个对象 <i>mytagone</i> 定义成了一个标签对象，而且这个标签对象的名称是 <i>one</i>。如果我们想设置它默认的布局，我们可以把这种 key/value 对加入 table，就像文档中说明的那样。
</p>
<pre>mytagtwo = tag({name = "two", layout = "floating" })
</pre>
<p>现在，我们有了第二个标签对象 <i>mytagtwo</i>：它的名称是 <i>two</i>，而且默认把所有客户按照 floating 布局排列。
</p><p>创建对象很有用，但是目前而言，它还没起作用。请记住：每个屏幕都至少要分配一个标签。所以我们需要把这些创建好了的标签添加到我们的首个屏幕。这个 <i>screen</i> 参数为我们作了这件事，我们只要把屏幕的索引赋值给它就可以了。
</p>
<pre>mytagone.screen = 1
</pre>
<p>我们刚刚把那个标签对象添加到屏幕#1。如果我们拥有第二台显示器，我们可以把我们的第二个标签对象添加进去。
</p>
<pre>mytagtwo.screen = 2
</pre>
<p>而且如果我们有第三台显示器，我们就可以……好了，我想你已经明白了。
</p><p>如果你想知道你拥有多少个屏幕，你可以调用这个函数 <i>screen.count()</i>。
</p><p>你通过 <i>selected</i> 参数可以操控标签的显示与否。如果你想查看你的标签 <i>one</i>：
</p>
<pre>mytagone.selected = true
</pre>
<p>如果你想隐藏它，你可以赋值 <i>false</i>。
</p><p>你通过这个参数可以操控所有的标签显示与否。请查阅文档。
</p>
<h2><span class="mw-headline" id=".E5.AE.A2.E6.88.B7.E7.9A.84.E6.93.8D.E6.8E.A7">客户的操控</span></h2>
<p>有时候，你可能会获得客户对象。它在 hook 函数中是非常有用的，我们将会稍后讨论 hook 函数。
</p><p>一个客户就是一个像标签和其它东西一样拥有方法的对象。我们决定用 <i>c</i> 这个变量命名我们的客户对象。
例如，如果我们想把一个对象的显示方式设置为浮动方式，我们可以使用 <i>floating</i> 参数，就像这样：
</p>
<pre>c.floating = true
</pre>
<p>某些方法具有的返回值可以用来进行后期处理。如果我们已经知道一个客户是浮动显示的，我们可以获得这个 <i>floating</i> 参数的值：
</p>
<pre>is_client_floating = c.floating
</pre>
<p>现在这个变量 <i>is_client_floating</i> 包含了一个布尔值：<i>true</i> 表示这个客户是浮动显示的，或者 <i>false</i> 表示它不是浮动显示的。
</p><p>我们可以接合这两个函数来创建一个开关函数：这个函数将控制客户的浮动显示与否。
</p>
<pre>function client_floating_toggle(c)
    if c then
        c.floating = not c.floating
    end
end
</pre>
<p>我们还可以用它来控制在我们客户上的标签：
</p>
<pre>function client_tag_with_tag_one(c)
    if c then
        local t = c:tags()
        table.insert(t, one)
        c:tags(t)
    end
end
</pre>
<h2><span class="mw-headline" id=".E9.9B.B6.E4.BB.B6.E7.9A.84.E5.88.9B.E5.BB.BA">零件的创建</span></h2>
<p>零件是一些很小的对象，它们可以放置在标题栏或者状态栏上。和标签对象一样，如果你不把它们添加到某个地方，它们是不起作用的。创建一个零件需要用到一个函数 <i>widget()</i>：
</p>
<pre>mytextbox = widget({ type = "textbox", name = "mytextbox" })
</pre>
<p><i>mytextbox</i> 现在包含了一个零件对象。对于不同的零件类型，你可以访问不同的参数，下面的设置是在 textbox 上显示文字。
</p>
<pre>mytextbox.text = "Hello, world!
</pre>
<h2><span class="mw-headline" id=".E7.8A.B6.E6.80.81.E6.A0.8F.E7.9A.84.E5.88.9B.E5.BB.BA">状态栏的创建</span></h2>
<p>状态栏是零件的容器。状态栏可以放置在屏幕的上、下、左、右边缘。
</p><p>首先，创建一个状态栏：
</p>
<pre>mystatusbar = statusbar({ position = "top", name = "mystatusbar" })
</pre>
<p><i>mystatusbar</i> 现在是一个包含了状态栏对象的变量。由于我们设置了 <i>position</i> 为 <i>top</i>，它将会显示在我们屏幕的上方。但是我们还没有把它添加到屏幕上，所以现在它还没起作用。让我们开始吧：
</p>
<pre>mystatusbar.screen = 1
</pre>
<p>我们的状态栏现在已经显示在我们屏幕的上方了。很好，它什么也不做，但实际上它非常有用。让我们添加一些零件上去！
</p>
<pre>-- Create a textbox 创建一个文本零件
mytextbox = widget({ type = "textbox", name = "mytextbox" })
-- Set text of the textbox 设置文本零件显示的文字
mytextbox.text = "你好, 世界!"
-- Create a statusbar 创建一个状态栏
mystatusbar = statusbar({ position = "top", name = "mystatusbar" })
-- Add widgets to the statusbar 把零件添加到状态栏
mystatusbar:widgets({ mytextbox })
-- Add the statusbar on screen #1 把状态栏添加到屏幕#1
mystatusbar.screen = 1
</pre>
<p>我们现在已经有一个在屏幕上方显示 <i>你好，世界!</i> 的状态栏了。通过这些方法，你可以在你的 awesome 配置文件中设置一个拥有一些零件的个性状态栏了。
</p>
<h2><span class="mw-headline" id=".E6.A0.87.E9.A2.98.E6.A0.8F.E7.9A.84.E5.88.9B.E5.BB.BA">标题栏的创建</span></h2>
<p>正如我之前所说，标题栏和状态栏很相似，只不过它附属在一个窗口的边缘。创建一个标题栏，你知道的：
</p>
<pre>mytitlebar = titlebar({ position = "top" })
</pre>
<p>然后，你可能想放置零件上去。这和状态栏的处理很像：
</p>
<pre>mytitlebartitle = widget({ type = "textbox", name = "mytitlebartitle" })
mytitlebar:widgets({ mytitlebartitle })
</pre>
<p>一个标题栏必须添加一个 <i>客户对象</i>。我们可以得到当前焦点的客户：它的信息保存在 <i>client.focus</i> 变量中。让我们
</p>
<pre>-- Get the focused client 获得当前焦点对象
c = client.focus
-- Set a titlebar on it 给它设置一个标题栏
c.titlebar = mytitlebar
</pre>
<p>现在，焦点客户的上方已经有了一个不错的标题栏了！但是标题栏上什么也没有。不是吧，等等！请看，在标题栏中我们已经添加了一个 <i>textbox</i> 零件。现在我们可以用它把客户名称显示出来：
</p>
<pre>mytitlebartitle.text = c.name
</pre>
<p>这个 <i>name</i> 属性是一个描述了客户标题名称的字符串，我们可以把它作为文本内容赋值给零件。现在的标题栏已经显示出客户的标题了。
</p><p>请记住：一个标题栏是一个对象，一个客户也是一个对象。所以你需要为每一个你希望拥有标题栏的客户分别创建一个标题栏。
</p>
<h2><span class="mw-headline" id=".E9.92.A9.E5.AD.90.E7.9A.84.E4.BD.BF.E7.94.A8">钩子的使用</span></h2>
<p>正如之前我们所见，你可以创建一个美丽的界面。但是，设想一下你希望更新一个客户上标题栏中显示的标题：你做不到。等等！有办法：钩子函数。
</p><p>通过钩子，你可以定义一个函数，这个函数将在一个事件发生时被调用执行。让我们通过一个示例尝试一下。
</p><p>当一个客户在屏幕上弹出来的时候，awesome 运行一个 <i>manage</i> 钩子函数。通过传递客户这个参数来调用此函数。这里有个例子：
</p>
<pre>function hook_manage(c)
    if c.name:find("mplayer") then
        c.floating = true
    end
end
</pre>
<p>首先，我们定义了一个 <i>hook_manage</i> 函数，有一个参数名为 <i>c</i>，这个参数代表一个客户。然后，我们试图找到一个名为 <i>"mplayer"</i> 的客户，如果我们找到了，我们就把它的显示方式设置为浮动方式。
</p>
<pre> awful.hooks.manage.register(hook_manage)
</pre>
<p>再然后，通过上面这行调用，我们定义了当有新的客户出现时，执行一个名为 <i>hook_manage</i> 的函数。
</p><p>这里提供了众多的钩子供你使用和定义：focus, unfocus, manage, unmanage, mouseover, arrange, titleupdate, urgent, timer, 等等。参考系统帮助手册了解更多详细信息。
</p>
<h2><span class="mw-headline" id=".E6.89.A7.E8.A1.8C.E5.91.BD.E4.BB.A4.E6.88.96.E8.84.9A.E6.9C.AC">执行命令或脚本</span></h2>
<p>你可以在 lua 配置文件中执行命令和脚本。这里有个示例函数，它实现的功能是：运行参数所指定的命令并返回该命令的返回值。对于把命令的返回值放到 textboxes 零件上这类功能来说，这个函数还是很有用的。
</p>
<pre>
-- Execute command and return its output. You probably won't only execute commands with one
-- line of output
function execute_command(command)
   local fh = io.popen(command)
   local str = &quot;&quot;
   for i in fh:lines() do
      str = str .. i
   end
   io.close(fh)
   return str
end
</pre>
<p>这里有个例子说明了如何将 /proc/loadavg 信息放置在 mytextbox 零件上：
</p>
<pre>
 mytextbox.text = &quot; &quot; .. execute_command(&quot;cat /proc/loadavg&quot;) .. &quot; &quot;
</pre>
<h1><span class="mw-headline" id="awesome_Lua_.E5.BA.93">awesome Lua 库</span></h1>
<h2><span class="mw-headline" id="awful">awful</span></h2>
<p><a href="/w/index.php?title=Awful&amp;action=edit&amp;redlink=1" class="new" title="Awful (page does not exist)">awful</a> 是和 awesome 交互的默认库，其中包括了像鼠标动作或者键盘事件等。
</p>
<h2><span class="mw-headline" id="beautiful">beautiful</span></h2>
<p><a href="/wiki/Beautiful" title="Beautiful">Beautiful</a> 是关于 awesome 外观/主题的库。
</p>
<h2><span class="mw-headline" id="eminent">eminent</span></h2>
<p><a href="/wiki/Eminent" title="Eminent">Eminent</a> 是一个 Lua 库，它能让你使用动态标签(dynamic tagging)。动态标签在这里的含义是指你所拥有的标签总数并没有在固定死，你可以先设定一个特殊的标签名称，当你在最后一个标签上时，然后切换到下一个标签，这时它将提供给你一个新的标签。这将允许你在不改变你的配置文件的前提下适应多种用法，给你更多或更少的标签。
</p>
<h2><span class="mw-headline" id="naughty">naughty</span></h2>
<p><a href="/wiki/Naughty" title="Naughty">Naughty</a> 是关于通知的库。
</p>
<h2><span class="mw-headline" id="wicked">wicked</span></h2>
<p><a href="/wiki/Wicked" title="Wicked">Wicked</a> 是用于提供更多 awesome 零件所需的库。例如 MPD Widgets，CPU usage，memory usage，等等。
</p>
<!-- 
NewPP limit report
CPU time usage: 0.124 seconds
Real time usage: 0.146 seconds
Preprocessor visited node count: 757/1000000
Preprocessor generated node count: 1468/1000000
Post‐expand include size: 4909/2097152 bytes
Template argument size: 3793/2097152 bytes
Highest expansion depth: 6/40
Expensive parser function count: 48/100
-->

<!-- Saved in parser cache with key awesome:pcache:idhash:269-0!*!0!!en!5!* and timestamp 20160515131628 and revision id 4827
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://awesomewm.org/w/index.php?title=Awesome_3_configuration/zh-hans&amp;oldid=4827">https://awesomewm.org/w/index.php?title=Awesome_3_configuration/zh-hans&amp;oldid=4827</a>"</div>
					<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/wiki/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/wiki/Category:Awesome3" title="Category:Awesome3">Awesome3</a></li></ul></div></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="/wiki/Awesome_3_configuration/zh-hans" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="/w/index.php?title=Talk:Awesome_3_configuration/zh-hans&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="/w/index.php?title=Awesome_3_configuration/zh-hans&amp;action=edit" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="/w/index.php?title=Awesome_3_configuration/zh-hans&amp;action=history" rel="archives" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-anonuserpage"><a href="/wiki/User:95.90.224.24" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">95.90.224.24</a></li>
													<li id="pt-anontalk"><a href="/wiki/User_talk:95.90.224.24" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li>
													<li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=Awesome+3+configuration%2Fzh-hans&amp;returntoquery=printable%3Dyes" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="/wiki/Main_Page" style="background-image: url(/images/icons/aw_64.png);" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
											<li id="n-Homepage"><a href="http://awesome.naquadah.org" rel="nofollow">Homepage</a></li>
											<li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="/wiki/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="/w/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search awesome [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/Awesome_3_configuration/zh-hans" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/Awesome_3_configuration/zh-hans" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-permalink"><a href="/w/index.php?title=Awesome_3_configuration/zh-hans&amp;oldid=4827" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="/w/index.php?title=Awesome_3_configuration/zh-hans&amp;action=info">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by/3.0/"><img src="https://i.creativecommons.org/l/by/3.0/88x31.png" alt="Attribution 3.0 Unported" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<a href="//www.mediawiki.org/"><img src="/w/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified on 20 April 2011, at 22:48.</li>
									<li id="viewcount">This page has been accessed 11,141 times.</li>
									<li id="copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by/3.0/">Attribution 3.0 Unported</a> unless otherwise noted.</li>
									<li id="privacy"><a href="/wiki/awesome:Privacy_policy" title="awesome:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="/wiki/awesome:About" title="awesome:About">About awesome</a></li>
									<li id="disclaimer"><a href="/wiki/awesome:General_disclaimer" title="awesome:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://awesomewm.org/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;printable=1\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":108});
}</script></body></html>