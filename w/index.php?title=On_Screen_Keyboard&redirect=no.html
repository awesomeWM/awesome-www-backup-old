<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" />
<title>On Screen Keyboard - awesome</title>
<meta name="generator" content="MediaWiki 1.24.2" />
<link rel="alternate" type="application/x-wiki" title="Edit" href="/w/index.php?title=On_Screen_Keyboard&amp;action=edit" />
<link rel="edit" title="Edit" href="/w/index.php?title=On_Screen_Keyboard&amp;action=edit" />
<link rel="shortcut icon" href="/images/icons/aw_16.png" />
<link rel="search" type="application/opensearchdescription+xml" href="/w/opensearch_desc.php" title="awesome (en)" />
<link rel="EditURI" type="application/rsd+xml" href="https://awesomewm.org/w/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="/wiki/On_Screen_Keyboard" />
<link rel="copyright" href="https://creativecommons.org/licenses/by/3.0/" />
<link rel="alternate" type="application/atom+xml" title="awesome Atom feed" href="/w/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="https://awesomewm.org/w/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.skinning.content.externallinks%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.monobook.styles&amp;only=styles&amp;skin=monobook&amp;*" />
<!--[if IE 6]><link rel="stylesheet" href="/w/skins/MonoBook/IE60Fixes.css?303" media="screen" /><![endif]-->
<!--[if IE 7]><link rel="stylesheet" href="/w/skins/MonoBook/IE70Fixes.css?303" media="screen" /><![endif]--><meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="https://awesomewm.org/w/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=monobook&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: awesome:resourceloader:filter:minify-css:7:ad506c29508072131b881ff3f2f9d363 */</style>
<script src="https://awesomewm.org/w/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=monobook&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"On_Screen_Keyboard","wgTitle":"On Screen Keyboard","wgCurRevisionId":7399,"wgRevisionId":7399,"wgArticleId":1313,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"On_Screen_Keyboard","wgIsProbablyEditable":true,"wgRestrictionEdit":[],"wgRestrictionMove":[]});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"editfont":"default","editondblclick":0,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":1,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nickname":"","norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rows":25,"showhiddencats":0,"shownumberswatching":1,"showtoolbar":1,"skin":"monobook","stubthreshold":0,"thumbsize":5,"underline":2,"uselivepreview":0,"usenewrc":0,"watchcreations":1,"watchdefault":1,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"watchrollback":0,
"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"en","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"en"});},{},{});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});},{},{});
/* cache key: awesome:resourceloader:filter:minify-js:7:ab52f6eb1652fbc58fa39bdfdc3926f5 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax"]);
}</script>
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-On_Screen_Keyboard skin-monobook action-view">
<div id="globalWrapper">
		<div id="column-content">
			<div id="content" class="mw-body" role="main">
				<a id="top"></a>
									<div id="siteNotice"><div id="localNotice" lang="en" dir="ltr"><p><b>This wiki will shut down!</b>
</p><p>Please note that this wiki will be made read-only and eventually be taken offline.
</p><p>A replacement is being discussed at <a rel="nofollow" class="external free" href="https://github.com/awesomeWM/awesome-www/issues/7">https://github.com/awesomeWM/awesome-www/issues/7</a>. We'd be happy to have more input for that discussion and volunteers who help us migrate the content of this wiki to its replacement.
</p></div></div>
				<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">On Screen Keyboard</span></h1>

				<div id="bodyContent" class="mw-body-content">
					<div id="siteSub">From awesome</div>
					<div id="contentSub"></div>
										<div id="jump-to-nav" class="mw-jump">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>

					<!-- start content -->
					<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Using_Awesome_with_an_On-Screen_Keyboard"><span class="tocnumber">1</span> <span class="toctext">Using Awesome with an On-Screen Keyboard</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#First.2C_calibrate_to_the_correct_values"><span class="tocnumber">1.1</span> <span class="toctext">First, calibrate to the correct values</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Then.2C_create_a_little_wrapper_around_florence."><span class="tocnumber">1.2</span> <span class="toctext">Then, create a little wrapper around florence.</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Next.2C_configure_the_necessary_constants_in_rc.lua"><span class="tocnumber">1.3</span> <span class="toctext">Next, configure the necessary constants in rc.lua</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Finally.2C_add_the_rules"><span class="tocnumber">1.4</span> <span class="toctext">Finally, add the rules</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Using_Awesome_with_an_On-Screen_Keyboard">Using Awesome with an On-Screen Keyboard</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=On_Screen_Keyboard&amp;action=edit&amp;section=1" title="Edit section: Using Awesome with an On-Screen Keyboard">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Getting an On-Screen keyboard to work with Awesome is not exactly easy. Following these instructions will get florence running usably on Awesome.
</p>
<h3><span class="mw-headline" id="First.2C_calibrate_to_the_correct_values">First, calibrate to the correct values</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=On_Screen_Keyboard&amp;action=edit&amp;section=2" title="Edit section: First, calibrate to the correct values">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>You'll need to get some information in order to resize and position they keyboard correctly. In this configuration, we're going to have the virtual keyboard displayed flush against the right-hand side of the screen and have a margin on the left hand side. Florence doesn't let you set a fixed height and width in the configuration file, instead you have to figure out the dimensions that correspond to the maximum usable zoom setting and set it in a config file. First, copy the example config file
</p>
<pre>   mkdir -p ~/.config/florence
   cp /usr/share/doc/florence/examples/florence.conf ~/.config/florence
</pre>
<p>Then launch florence in a terminal using the command.
</p>
<pre>   florence --config --use-config ~/.config/florence/florence.conf
</pre>
<p>which will allow you to edit your personal configuration file using florence's built-in tool. If you prefer, you can edit it using a text editor but the gui config tool is easier for this part. Go to where it says Window and zoom until it takes up the full width of the screen.
</p><p>Finally, add the following lines to your rc.lua file.
</p>
<pre>   { rule = { class = "Florence" },
     properties = {
     floating = true,
     sticky = true,
   }, callback = function(c) 
          for key, value in pairs(c.geometry(c)) do
              naughty.notify({ title = "Geometry",
                    text = "X,Y: " .. c.geometry(c).x .. "," .. c.geometry(c).y .. "W,H: " .. c.geometry(c).width .. "," .. c.geometry(c).height })
          end
      end },
</pre>
<p>And restart awesome. The dimensions of your on-screen keyboard will pop up in your naughtyfications. Make a note of them before moving on.
</p>
<h3><span class="mw-headline" id="Then.2C_create_a_little_wrapper_around_florence.">Then, create a little wrapper around florence.</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=On_Screen_Keyboard&amp;action=edit&amp;section=3" title="Edit section: Then, create a little wrapper around florence.">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Create a file with the following content in /usr/bin/user-florence to launch florence with your config.
</p>
<pre>   #! /bin/sh
   awesome_florence(){
       if [ -f "$HOME/.config/florence/florence.conf" ]; then
           florence --use-config "$HOME/.config/florence/florence.conf"
       elif [ -f "/etc/florence.conf" ]; then
           florence --use-config "/etc/florence.conf"
       else
           florence
       fi
   }
   awesome_florence
</pre>
<h3><span class="mw-headline" id="Next.2C_configure_the_necessary_constants_in_rc.lua">Next, configure the necessary constants in rc.lua</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=On_Screen_Keyboard&amp;action=edit&amp;section=4" title="Edit section: Next, configure the necessary constants in rc.lua">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Take the keyboard dimensions you gathered in the first step and plug them into the following variables, which you can place anywhere above the rules section of your rc.lua file. The resolution of the screen I worked this out on was 1360x768, yours will be different if your resolution is different.
</p>
<pre>   geom = screen[mouse.screen].workarea
   kb_geoh = 335 -- You'll need to change this value to match with your screen resolution
   kb_geow = 1306 -- Same here
</pre>
<pre>   kb_geox = geom.width - kb_geow -- This makes sure the virtual keyboard is against the far right
   kb_geoy = geom.height - kb_geoh -- and the far bottom
   kb_dummy_geox = geom.width - 134 -- for some reason florence spawns this irritating extra window. This is to minimize that irritation.
   kb_dummy_geoy = geom.height - 134 -- same here.
</pre>
<h3><span class="mw-headline" id="Finally.2C_add_the_rules">Finally, add the rules</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="/w/index.php?title=On_Screen_Keyboard&amp;action=edit&amp;section=5" title="Edit section: Finally, add the rules">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre>   { rule = { class = "Florence" },
     properties = {
     floating = true,
     sticky = true,
   }, callback = function(c) 
          for key, value in pairs(c.geometry(c)) do
              if c.geometry(c).y &lt; 400 then
                  c:geometry({x=kb_dummy_geox, y=kb_dummy_geoy, height=134, width=134})
              end
          end
      end },
</pre>
<p>And you have a usable on screen keyboard for awesome
</p>
<!-- 
NewPP limit report
CPU time usage: 0.012 seconds
Real time usage: 0.013 seconds
Preprocessor visited node count: 18/1000000
Preprocessor generated node count: 24/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key awesome:pcache:idhash:1313-0!*!*!!en!*!* and timestamp 20160515163526 and revision id 7399
 -->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="https://awesomewm.org/w/index.php?title=On_Screen_Keyboard&amp;oldid=7399">https://awesomewm.org/w/index.php?title=On_Screen_Keyboard&amp;oldid=7399</a>"</div>
					<div id='catlinks' class='catlinks catlinks-allhidden'></div>					<!-- end content -->
										<div class="visualClear"></div>
				</div>
			</div>
		</div>
		<div id="column-one">
			<h2>Navigation menu</h2>
					<div id="p-cactions" class="portlet" role="navigation">
			<h3>Views</h3>

			<div class="pBody">
				<ul>
				<li id="ca-nstab-main" class="selected"><a href="/wiki/On_Screen_Keyboard" title="View the content page [c]" accesskey="c">Page</a></li>
				<li id="ca-talk" class="new"><a href="/w/index.php?title=Talk:On_Screen_Keyboard&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				<li id="ca-edit"><a href="/w/index.php?title=On_Screen_Keyboard&amp;action=edit" title="You can edit this page. Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				<li id="ca-history"><a href="/w/index.php?title=On_Screen_Keyboard&amp;action=history" rel="archives" title="Past revisions of this page [h]" accesskey="h">History</a></li>
				</ul>
							</div>
		</div>
				<div class="portlet" id="p-personal" role="navigation">
				<h3>Personal tools</h3>

				<div class="pBody">
					<ul>
													<li id="pt-anonuserpage"><a href="/wiki/User:95.90.224.24" class="new" title="The user page for the IP address you are editing as [.]" accesskey=".">95.90.224.24</a></li>
													<li id="pt-anontalk"><a href="/wiki/User_talk:95.90.224.24" class="new" title="Discussion about edits from this IP address [n]" accesskey="n">Talk for this IP address</a></li>
													<li id="pt-login"><a href="/w/index.php?title=Special:UserLogin&amp;returnto=On+Screen+Keyboard&amp;returntoquery=redirect%3Dno" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
											</ul>
				</div>
			</div>
			<div class="portlet" id="p-logo" role="banner">
				<a href="/wiki/Main_Page" style="background-image: url(/images/icons/aw_64.png);" title="Visit the main page"></a>
			</div>
				<div class="generated-sidebar portlet" id="p-navigation" role="navigation">
		<h3>Navigation</h3>
		<div class='pBody'>
							<ul>
											<li id="n-mainpage-description"><a href="/wiki/Main_Page" title="Visit the main page [z]" accesskey="z">Main page</a></li>
											<li id="n-Homepage"><a href="http://awesome.naquadah.org" rel="nofollow">Homepage</a></li>
											<li id="n-recentchanges"><a href="/wiki/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
											<li id="n-randompage"><a href="/wiki/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
											<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
									</ul>
					</div>
		</div>
			<div id="p-search" class="portlet" role="search">
			<h3><label for="searchInput">Search</label></h3>

			<div id="searchBody" class="pBody">
				<form action="/w/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search"/>
					<input type="search" name="search" placeholder="Search" title="Search awesome [f]" accesskey="f" id="searchInput" />
					<input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchGoButton" class="searchButton" />&#160;
						<input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton" />
				</form>

							</div>
		</div>
			<div class="portlet" id="p-tb" role="navigation">
			<h3>Tools</h3>

			<div class="pBody">
				<ul>
											<li id="t-whatlinkshere"><a href="/wiki/Special:WhatLinksHere/On_Screen_Keyboard" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
											<li id="t-recentchangeslinked"><a href="/wiki/Special:RecentChangesLinked/On_Screen_Keyboard" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
											<li id="t-specialpages"><a href="/wiki/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
											<li id="t-print"><a href="/w/index.php?title=On_Screen_Keyboard&amp;redirect=no&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
											<li id="t-permalink"><a href="/w/index.php?title=On_Screen_Keyboard&amp;oldid=7399" title="Permanent link to this revision of the page">Permanent link</a></li>
											<li id="t-info"><a href="/w/index.php?title=On_Screen_Keyboard&amp;action=info">Page information</a></li>
									</ul>
							</div>
		</div>
			</div><!-- end of the left (by default at least) column -->
		<div class="visualClear"></div>
					<div id="footer" role="contentinfo">
						<div id="f-copyrightico">
									<a href="https://creativecommons.org/licenses/by/3.0/"><img src="https://i.creativecommons.org/l/by/3.0/88x31.png" alt="Attribution 3.0 Unported" width="88" height="31" /></a>
							</div>
					<div id="f-poweredbyico">
									<a href="//www.mediawiki.org/"><img src="/w/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" width="88" height="31" /></a>
							</div>
					<ul id="f-list">
									<li id="lastmod"> This page was last modified on 27 December 2015, at 05:23.</li>
									<li id="viewcount">This page has been accessed 64 times.</li>
									<li id="copyright">Content is available under <a class="external" rel="nofollow" href="https://creativecommons.org/licenses/by/3.0/">Attribution 3.0 Unported</a> unless otherwise noted.</li>
									<li id="privacy"><a href="/wiki/awesome:Privacy_policy" title="awesome:Privacy policy">Privacy policy</a></li>
									<li id="about"><a href="/wiki/awesome:About" title="awesome:About">About awesome</a></li>
									<li id="disclaimer"><a href="/wiki/awesome:General_disclaimer" title="awesome:General disclaimer">Disclaimers</a></li>
							</ul>
		</div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"https://awesomewm.org/w/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=monobook\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script>if(window.mw){
mw.config.set({"wgBackendResponseTime":130});
}</script></body></html>