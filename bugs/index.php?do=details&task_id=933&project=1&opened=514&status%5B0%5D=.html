<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-AU" xml:lang="en-AU">
  <head>
    <title>FS#933 : Textboxes and wibox.layout.flex missbihaving</title>

    <meta name="description" content="Flyspray, a Bug Tracking System written in PHP." />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript" />
    <meta http-equiv="Content-Style-Type" content="text/css" />

    <link rel="icon" type="image/png" href="https://awesomewm.org/bugs/themes/Bluey/favicon.ico" />
    <link rel="index" id="indexlink" type="text/html" href="https://awesomewm.org/bugs/" />
        <link media="screen" href="https://awesomewm.org/bugs/themes/Bluey/theme.css" rel="stylesheet" type="text/css" />
    <link media="print"  href="https://awesomewm.org/bugs/themes/Bluey/theme_print.css" rel="stylesheet" type="text/css" />
    <link rel="alternate" type="application/rss+xml" title="Flyspray RSS 1.0 Feed"
          href="https://awesomewm.org/bugs/feed.php?feed_type=rss1&amp;project=1" />
    <link rel="alternate" type="application/rss+xml" title="Flyspray RSS 2.0 Feed"
          href="https://awesomewm.org/bugs/feed.php?feed_type=rss2&amp;project=1" />
	<link rel="alternate" type="application/atom+xml" title="Flyspray Atom 0.3 Feed"
	      href="https://awesomewm.org/bugs/feed.php?feed_type=atom&amp;project=1" />

    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/prototype/prototype.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/script.aculo.us/scriptaculous.js"></script>
            <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/details.js"></script>
                <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/tabs.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/functions.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/calendar_stripped.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/calendar-setup_stripped.js"> </script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/lang/calendar-en.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/lightbox/js/lightbox.js"></script>
    <link rel="stylesheet" href="https://awesomewm.org/bugs/javascript/lightbox/css/lightbox.css" type="text/css" media="screen" />
    <!--[if IE]>
    <link media="screen" href="https://awesomewm.org/bugs/themes/Bluey/ie.css" rel="stylesheet" type="text/css" />
    <![endif]-->
      </head>
  <body onload="perms = new Perms('permissions');">

  <div id="container">
    <!-- Remove this to remove the logo -->
    <h1 id="title"><a href="https://awesomewm.org/bugs/">awesome</a></h1>

    <div id="menu">

<form id="login" action="https://awesomewm.org/bugs/index.php?do=authenticate" method="post">
<div>
  <label for="lbl_user_name">Username</label>
  <input class="text" type="text" id="lbl_user_name" name="user_name" size="17" maxlength="30" />

  <label for="lbl_password">Password</label>
  <input class="password" type="password" id="lbl_password" name="password" size="17" maxlength="30" />

  <label for="lbl_remember">Remember me</label>
  <input type="checkbox" id="lbl_remember" name="remember_login" />
  
  <input type="hidden" name="return_to" value="/bugs/index.php?do=details&amp;task_id=933&amp;project=1&amp;opened=514&amp;status%5B0%5D=" />

  <button accesskey="l" type="submit">Login!</button>

  <span id="links">
            <a id="forgotlink" href="https://awesomewm.org/bugs/index.php?do=lostpw">Lost password?</a>
      </span>
</div>
</form>
</div>

<div id="pm-menu">

<div id="projectselector">
    <form id="projectselectorform" action="https://awesomewm.org/bugs/index.php" method="get">
       <div>
        <select name="project" onChange="document.getElementById('projectselectorform').submit()">
          <option value="0">All Projects</option>        </select>
        <button type="submit">Switch</button>
        <input type="hidden" name="do" value="details" />
        <input type="hidden" value="1" name="switch" />
              </div>
    </form>
</div>

<ul id="pm-menu-list">
    <li class="first">
      <a id="toplevellink" href="https://awesomewm.org/bugs/index.php?do=toplevel&amp;project=1">Overview</a>
    </li>

    <li>
    <a id="homelink"
        href="https://awesomewm.org/bugs/index.php?project=1&amp;do=index">Tasklist</a>
    </li>

    
    
        <li>
    <a id="roadmaplink"
        href="https://awesomewm.org/bugs/index.php?do=roadmap&amp;project=1">Roadmap</a>
    </li>
    
    
    </ul>
</div>

    
    <div id="content">
      <div id="showtask">
        <form action="https://awesomewm.org/bugs/index.php" method="get">
          <div>
            <button type="submit">Show Task #</button>
            <input id="taskid" name="show_task" class="text" type="text" size="10" accesskey="t" />
          </div>
        </form>
      </div>

      <div class="clear"></div>
            <div id="intromessage">Welcome to awesome bug tracking system.</div>
      <div id="taskdetails">
<span id="navigation">   <del>&#160;<a href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=961&amp;project=1&amp;opened=514&amp;status%5B0%5D=" title="Fixed | Add --replace option to awesome command | 100%"  id = "prev" accesskey = "p" class = "closedtasklink">Previous task</a>&#160;</del>     |     <a href="https://awesomewm.org/bugs/index.php?project=1&amp;do=index&amp;opened=514&amp;status%5B0%5D=">Tasklist</a>
   |     <del>&#160;<a href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=931&amp;project=1&amp;opened=514&amp;status%5B0%5D=" title="Fixed | Compilation Errors on zenburn titlebar icons. | 100%"  id = "next" accesskey = "n" class = "closedtasklink">Next task</a>&#160;</del>  </span>

  <h2 class="summary severity2">
	 FS#933 - Textboxes and wibox.layout.flex missbihaving  </h2>

  <div id="fineprint">
	 Attached to Project:
	 <a href="/bugs/index.php?project=1">awesome</a>
	 <br />
	 Opened by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=514">Ignas Anikevicius (gns_ank)</a>     	 - Tuesday, 18 October 2011, 22:05 GMT 	 	 <br />
	 Last edited by  <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a>	 - Wednesday, 19 October 2011, 18:14 GMT 	   </div>

  <table><tr><td id="taskfieldscell">
  <div id="taskfields">
	 <table>
		<tr>
		  <th id="tasktype">Task Type</th>
		  <td headers="tasktype">Bug Report</td>
		</tr>
		<tr>
		  <th id="category">Category</th>
		  <td headers="category">
			 			 Core		  </td>
		</tr>
		<tr>
		  <th id="status">Status</th>
		  <td headers="status">
			 			 Closed			 		  </td>
		</tr>
		<tr>
		  <th id="assignedto">Assigned To</th>
		  <td headers="assignedto">
			 			 No-one			 		  </td>
		</tr>
		<tr>
		  <th id="os">Operating System</th>
		  <td headers="os">All</td>
		</tr>
		<tr>
		  <th id="severity">Severity</th>
		  <td headers="severity">Low</td>
		</tr>
		<tr>
		  <th id="priority">Priority</th>
		  <td headers="priority">Normal</td>
		</tr>
		<tr>
		  <th id="reportedver">Reported Version</th>
		  <td headers="reportedver">git/master</td>
		</tr>
		<tr>
		  <th id="dueversion">Due in Version</th>
		  <td headers="dueversion">
			 			 Undecided			 		  </td>
		</tr>
		<tr>
		  <th id="duedate">Due Date</th>
		  <td headers="duedate">
			 Undecided		  </td>
		</tr>
		<tr>
		  <th id="percent">Percent Complete</th>
		  <td headers="percent">
			 <img src="https://awesomewm.org/bugs/themes/Bluey/percent-100.png"
				title="100% complete"
				alt="100%" />
		  </td>
		</tr>
        <tr class="votes">
		  <th id="votes">Votes</th>
		  <td headers="votes">
                    <a href="javascript:showhidestuff('showvotes')">1 </a>
          <div id="showvotes" class="hide">
              <ul class="reports">
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=589">dodo (dodo)</a> (2011-10-19)</li>
                            </ul>
          </div>
                              </td>
        </tr>
        <tr>
		  <th id="private">Private</th>
		  <td headers="private">
                        No            
                      </td>
        </tr>
        	 </table>
  </div>

  </td><td>

  <div id="taskdetailsfull">
	 <h3 class="taskdesc">Details</h3>
     <div id="taskdetailstext">Hello to everybody,<br />
<br />
I have had this bug for a while, but did not have time to report it.<br />
<br />
It seems, that when using the wibox.layout.flex layout the textboxes in the tasklist are resized equally, but the text inside the textbox does not know about it. There is a screenshot (unexpected.jpg), where you can see the unexpected behaviour.<br />
<br />
I have tried to come up with a solution of my own (results shown in solution1.jpg) by introducing a bg_normal colour to the tasklist, but it does not fix the behaviour for the last item. <br />
<br />
I was also wondering whether there is any mechanism to truncate a string with oopango or to get the dimensions of the resized widget when wibox.layout.flex is used?<br />
<br />
If you need any other info, please let me know and I will be happy to provide it.<br />
<br />
Ignas</div>

         <div class="attachments">
          <a title="solution1.jpg" href="?getfile=448" rel="lightbox[bug]">
                <img src="https://awesomewm.org/bugs/themes/Bluey/mime/image.png" alt="" title="image/jpeg; charset=binary" />
            &nbsp;&nbsp;
            solution1.jpg
                  </a>
                  (125.6 KiB)
          <br />
          <a title="unexpected.jpg" href="?getfile=449" rel="lightbox[bug]">
                <img src="https://awesomewm.org/bugs/themes/Bluey/mime/image.png" alt="" title="image/jpeg; charset=binary" />
            &nbsp;&nbsp;
            unexpected.jpg
                  </a>
                  (95.6 KiB)
          <br />
    </div>
  
  </div>

  </td></tr></table>

  <div id="taskinfo">
	 <div id="taskdeps">
		<b>This task depends upon</b>
		<br />
		
		<br class="DoNotPrint" />

		
			 </div>

	 <div id="taskblocks">
        			 </div>
  </div>

    <div id="taskclosed">
      Closed by&nbsp;&nbsp;<a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a><br />
      Wednesday, 19 October 2011, 18:14 GMT <br />
      <strong>Reason for closing:</strong> &nbsp;Fixed<br />
            <strong>Additional comments about closing:</strong> &nbsp;commit
d8f0bd13bf4299a0efdce2f49d8cf7150cc187a9
<br />
Author: Uli Schlachter
&lt;psychon@znc.in&gt;<br />
Date:   Wed Oct 19 19:05:25 2011
+0200<br />
<br />
    textbox: Actually tell pango which
space we have (<del>&#160;<a
href="https://awesomewm.org/bugs/index.p
hp?do=details&amp;task_id=933&amp;projec
t=1&amp;opened=514&amp;status%5B0%5D="
title="Fixed | Textboxes and
wibox.layout.flex missbihaving | 100%" 
class =
"closedtasklink">FS#933</a>&#160;</del>)
<br />
    <br />
    In the textbox&#039; draw() callback
we forgot to set the pango layout&#039;s
width and<br />
    height. Whoops.        </div>
  
  <div id="actionbuttons">
	 
	 
	 	   </div>
</div>
<ul id="submenu">
    <li id="commentstab">
  <a href="#comments">Comments (16)</a>
  </li>
  
  <li id="relatedtab">
  <a href="#related">Related Tasks (0/0)</a>
  </li>

  
  </ul>
<div id="comments" class="tab">
    <em>
    <a name="comment2745" id="comment2745"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2745">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Wednesday, 19 October 2011, 09:35 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">So the individual tasklist entries draw their long text outside to the right of their assigned space?<br />
<br />
This could be a bug in cairo since before drawing a widget we set the clip. This means that cairo already is supposed to make sure that the widgets don&#039;t draw outside of their assigned space. Meh.<br />
<br />
This could also be a bug in awesome where it just miscalculates the avilable space for the individual tasklist entries. However, since on your &quot;solution1.jpg&quot; the text is also drawn ontop of the clock widget, I kind of doubt that. What exactly did you modify for your attempted fix? How would a bg color help?<br />
<br />
Could you attach your config?<br />
<br />
I just noticed that the textbox is supposed to ellipsize the text via &quot;...&quot; if it doesn&#039;t fit into the available space, but my tasklist doesn&#039;t do that either. Weird.</div></div>

  
    <em>
    <a name="comment2746" id="comment2746"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2746">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=589">dodo (dodo)</a> -
    Wednesday, 19 October 2011, 12:09 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">sry .. had this bug a really long time by now and forgot to submit the fixes ...<br />
<br />
there are two possible fixes, but both working too as well .. and i think they are pretty much self explanatory when you look at the code</div></div>

      <div class="attachments">
          <a title="0001-awful.widget.common-avoid-giving-text-all-space-beca.patch" href="?getfile=450" >
                <img src="https://awesomewm.org/bugs/themes/Bluey/mime/text.png" alt="" title="text/plain; charset=us-ascii" />
            &nbsp;&nbsp;
            0001-awful.widget.common-avoi...
                  </a>
                  (0.8 KiB)
          <br />
          <a title="0001-awful.widget.tasklist-use-normal-background-color-as.patch" href="?getfile=451" >
                <img src="https://awesomewm.org/bugs/themes/Bluey/mime/text.png" alt="" title="text/plain; charset=utf-8" />
            &nbsp;&nbsp;
            0001-awful.widget.tasklist-us...
                  </a>
                  (1 KiB)
          <br />
    </div>
  

    <em>
    <a name="comment2747" id="comment2747"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2747">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Wednesday, 19 October 2011, 12:14 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">So you force the fixed widgets in the flex layout to only use the space that it needs and then fix that up by drawing stuff with the background color? That doesn&#039;t really sound like a good fix.<br />
<br />
At least this points fingers at the flex layout. Could you please still attach your config? I&#039;d like to try to reproduce this.</div></div>

  
    <em>
    <a name="comment2748" id="comment2748"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2748">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=589">dodo (dodo)</a> -
    Wednesday, 19 October 2011, 12:24 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">ok i confused .. which config you wanna see his or mine?<br />
<br />
anyways here is mine<a href=" https://github.com/dodo/awesomerc"> https://github.com/dodo/awesomerc</a></div></div>

  
    <em>
    <a name="comment2749" id="comment2749"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2749">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Wednesday, 19 October 2011, 12:29 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Whoops, sorry, didn&#039;t notice that two different people were commenting.<br />
<br />
I&#039;d just like to be able to see this bug myself which somehow doesn&#039;t happen with my config, so yours should be good, thanks</div></div>

  
    <em>
    <a name="comment2750" id="comment2750"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2750">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=514">Ignas Anikevicius (gns_ank)</a> -
    Wednesday, 19 October 2011, 13:58 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">This was the patch, with which I solved the issue partially, but I do not think, that this was a good way to solve it.<br />
<br />
My config can be found here:<br /><a href="
https://github.com/gns-ank/dotfiles/blob/master/config/awesome/rc.lua">
https://github.com/gns-ank/dotfiles/blob/master/config/awesome/rc.lua</a><br />
<br />
If the problem might be in cairo, or oocaro, then what versions are you using? Mine are the following:<br />
<br />
[I] x11-libs/pango (1.28.4@30/06/11): Internationalized text layout and rendering library<br />
[I] x11-libs/cairo (1.10.2-r1@28/05/11): A vector graphics library with cross-device output support<br />
[I] dev-lua/oopango [1] (1.1@26/07/11): Lua bindings to the pango library<br />
[1] &quot;wirelay&quot; /var/lib/layman/wirelay<br />
[I] dev-lua/oocairo [1] (1.4@26/07/11): Lua bindings to the cairo library<br />
[1] &quot;wirelay&quot; /var/lib/layman/wirelay<br />
<br />
I am using Gentoo.<br />
<br />
Ignas</div></div>

      <div class="attachments">
          <a title="0002-Adding-fg-bg-_normal-to-prevent-text-overlapping.patch" href="?getfile=452" >
                <img src="https://awesomewm.org/bugs/themes/Bluey/mime/text.png" alt="" title="text/plain; charset=us-ascii" />
            &nbsp;&nbsp;
            0002-Adding-fg-bg-_normal-to-...
                  </a>
                  (2.4 KiB)
          <br />
    </div>
  

    <em>
    <a name="comment2752" id="comment2752"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2752">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=589">dodo (dodo)</a> -
    Wednesday, 19 October 2011, 14:24 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">i&#039;m using all three packages from git and building it myself on my debian machine.<br />
<br />
my versions so far:<br />
<br />
awesome 351fc7a<br />
oocairo c87c37a<br />
oopango 89b9b9d<br />
<br />
btw .. @ignas patch looks better than mine :)</div></div>

  
    <em>
    <a name="comment2754" id="comment2754"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2754">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Wednesday, 19 October 2011, 14:44 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">@dodo: Do you have cairo 1.10.2, too?<br />
<br />
I&#039;m using cairo git/master (same for awesome, oopango and oocairo since I&#039;m upstream there), my pango version is 1.29.4-1 (yes, this is debian).<br />
<br />
This could be a (weird) clipping but in cairo, together with some bug in awesome&#039;s textbox...</div></div>

  
    <em>
    <a name="comment2755" id="comment2755"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2755">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=589">dodo (dodo)</a> -
    Wednesday, 19 October 2011, 14:56 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">sry .. forgot them :P<br />
<br />
i hope these are the right packages (from debian/sid):<br />
<br />
libcairo2-dev   1.10.2-6.1<br />
libpango1.0-dev 1.29.4-1<br />
<br /></div></div>

  
    <em>
    <a name="comment2756" id="comment2756"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2756">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Wednesday, 19 October 2011, 15:01 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Ok, could one of you test if this bug disappears when using cairo from git?<br />
<br />
Gentoo has a -9999 ebuild, Debian doesn&#039;t. You could also compile cairo in e.g. /tmp/cairo/ and use LD_LIBRARY_PATH=/tmp/cairo/src/.libs to make awesome pick up that library. pmap $(pidof awesome) | grep cairo can be used to check which cairo library it&#039;s using.<br />
<br />
And yes, this means that I suspect this to be a bug in cairo.</div></div>

  
    <em>
    <a name="comment2758" id="comment2758"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2758">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Wednesday, 19 October 2011, 15:09 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Oh, nevermind, I&#039;m stupid. I do have cairo 1.10.2 installed to /usr, too, I&#039;m just using LD_LIBRARY_PATH to make everything use my git clone.<br />
<br />
So this is indeed a cairo bug which was already fixed (and likely even fixed by me).<br />
<br />
This just leaves us to the issue of us giving wrong available width information to pango, I&#039;ll try some debugging on that later.</div></div>

  
    <em>
    <a name="comment2759" id="comment2759"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2759">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=589">dodo (dodo)</a> -
    Wednesday, 19 October 2011, 15:15 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">interesting.<br />
<br />
@ignas, could you please test it? seems to easier for you ^^<br />
<br />
@psychon, could you please merge @ignas&#039; patch into master, or do you think that&#039;s not necessary?<br />
(imo, just for completeness)</div></div>

  
    <em>
    <a name="comment2760" id="comment2760"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2760">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Wednesday, 19 October 2011, 15:24 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">I&#039;m unsure about that patch.<br />
&lt;Some pointless reasoning removed&gt;<br />
<br />
Pushed (not as a fix for this bug, but just since it adds some configuration possibilities, ie I can now have my tasklist use a green font and everything else red)</div></div>

  
    <em>
    <a name="comment2761" id="comment2761"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2761">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Wednesday, 19 October 2011, 17:08 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Oh, I&#039;m stupid. The textbox widget didn&#039;t set the pango layout&#039;s width and height in its draw() method which obviously is why pango ignored the non-existing settings.<br />
<br />
Attached is a patch for this which fixes the issue for me. Could you locally revert ignas&#039; patch and try this?<br />
<br />
Thanks for making me spot this bug and sorry for me being so stupid.</div></div>

      <div class="attachments">
          <a title="0001-textbox-Actually-tell-pango-which-space-we-have-FS-9.patch" href="?getfile=453" >
                <img src="https://awesomewm.org/bugs/themes/Bluey/mime/text.png" alt="" title="text/plain; charset=us-ascii" />
            &nbsp;&nbsp;
            0001-textbox-Actually-tell-pa...
                  </a>
                  (1.6 KiB)
          <br />
    </div>
  

    <em>
    <a name="comment2762" id="comment2762"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2762">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=589">dodo (dodo)</a> -
    Wednesday, 19 October 2011, 17:54 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">workx for me :}</div></div>

  
    <em>
    <a name="comment2763" id="comment2763"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#comment2763">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=514">Ignas Anikevicius (gns_ank)</a> -
    Wednesday, 19 October 2011, 18:40 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Thanks very much for that. It works very well... :)</div></div>

  
  
  </div>
<div id="related" class="tab">
  <table>    <tr><td>
    <form method="post" action="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=933#related" >
        <table id="tasks_related" class="userlist">
        <tr>
          <th>
            <a href="javascript:ToggleSelected('tasks_related')">
              <img title="Toggle Selected" alt="Toggle Selected" src="https://awesomewm.org/bugs/themes/Bluey/kaboodleloop.png" width="16" height="16" />
            </a>
          </th>
          <th>Tasks related to this task (0)</th>
        </tr>
                <tr>
          <td colspan="2">
            <input type="hidden" name="action" value="remove_related" />
            <input type="hidden" name="task_id" value="933" />
            <button type="submit">Remove</button>
          </td>
        </tr>
        </table>
    </form>
    </td><td>
    
    <table id="duplicate_tasks" class="userlist">
        <tr>
          <th>Duplicate tasks of this task (0)</th>
        </tr>
            </table>
    </td></tr>
  </table>

  </div>
<div id="history" class="tab">
  <h3>Loading...</h3>
</div>
    </div>
    <p id="footer">
       <!-- Please don't remove this line - it helps promote Flyspray -->
       <a href="http://flyspray.org/" class="offsite">Powered by Flyspray</a>
    </p>
  </div>
  </body>
</html>
