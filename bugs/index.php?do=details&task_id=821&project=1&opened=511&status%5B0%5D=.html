<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-AU" xml:lang="en-AU">
  <head>
    <title>FS#821 : xcompmgr and awesome menus</title>

    <meta name="description" content="Flyspray, a Bug Tracking System written in PHP." />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript" />
    <meta http-equiv="Content-Style-Type" content="text/css" />

    <link rel="icon" type="image/png" href="https://awesomewm.org/bugs/themes/Bluey/favicon.ico" />
    <link rel="index" id="indexlink" type="text/html" href="https://awesomewm.org/bugs/" />
        <link media="screen" href="https://awesomewm.org/bugs/themes/Bluey/theme.css" rel="stylesheet" type="text/css" />
    <link media="print"  href="https://awesomewm.org/bugs/themes/Bluey/theme_print.css" rel="stylesheet" type="text/css" />
    <link rel="alternate" type="application/rss+xml" title="Flyspray RSS 1.0 Feed"
          href="https://awesomewm.org/bugs/feed.php?feed_type=rss1&amp;project=1" />
    <link rel="alternate" type="application/rss+xml" title="Flyspray RSS 2.0 Feed"
          href="https://awesomewm.org/bugs/feed.php?feed_type=rss2&amp;project=1" />
	<link rel="alternate" type="application/atom+xml" title="Flyspray Atom 0.3 Feed"
	      href="https://awesomewm.org/bugs/feed.php?feed_type=atom&amp;project=1" />

    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/prototype/prototype.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/script.aculo.us/scriptaculous.js"></script>
            <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/details.js"></script>
                <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/tabs.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/functions.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/calendar_stripped.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/calendar-setup_stripped.js"> </script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/lang/calendar-en.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/lightbox/js/lightbox.js"></script>
    <link rel="stylesheet" href="https://awesomewm.org/bugs/javascript/lightbox/css/lightbox.css" type="text/css" media="screen" />
    <!--[if IE]>
    <link media="screen" href="https://awesomewm.org/bugs/themes/Bluey/ie.css" rel="stylesheet" type="text/css" />
    <![endif]-->
      </head>
  <body onload="perms = new Perms('permissions');">

  <div id="container">
    <!-- Remove this to remove the logo -->
    <h1 id="title"><a href="https://awesomewm.org/bugs/">awesome</a></h1>

    <div id="menu">

<form id="login" action="https://awesomewm.org/bugs/index.php?do=authenticate" method="post">
<div>
  <label for="lbl_user_name">Username</label>
  <input class="text" type="text" id="lbl_user_name" name="user_name" size="17" maxlength="30" />

  <label for="lbl_password">Password</label>
  <input class="password" type="password" id="lbl_password" name="password" size="17" maxlength="30" />

  <label for="lbl_remember">Remember me</label>
  <input type="checkbox" id="lbl_remember" name="remember_login" />
  
  <input type="hidden" name="return_to" value="/bugs/index.php?do=details&amp;task_id=821&amp;project=1&amp;opened=511&amp;status%5B0%5D=" />

  <button accesskey="l" type="submit">Login!</button>

  <span id="links">
            <a id="forgotlink" href="https://awesomewm.org/bugs/index.php?do=lostpw">Lost password?</a>
      </span>
</div>
</form>
</div>

<div id="pm-menu">

<div id="projectselector">
    <form id="projectselectorform" action="https://awesomewm.org/bugs/index.php" method="get">
       <div>
        <select name="project" onChange="document.getElementById('projectselectorform').submit()">
          <option value="0">All Projects</option>        </select>
        <button type="submit">Switch</button>
        <input type="hidden" name="do" value="details" />
        <input type="hidden" value="1" name="switch" />
              </div>
    </form>
</div>

<ul id="pm-menu-list">
    <li class="first">
      <a id="toplevellink" href="https://awesomewm.org/bugs/index.php?do=toplevel&amp;project=1">Overview</a>
    </li>

    <li>
    <a id="homelink"
        href="https://awesomewm.org/bugs/index.php?project=1&amp;do=index">Tasklist</a>
    </li>

    
    
        <li>
    <a id="roadmaplink"
        href="https://awesomewm.org/bugs/index.php?do=roadmap&amp;project=1">Roadmap</a>
    </li>
    
    
    </ul>
</div>

    
    <div id="content">
      <div id="showtask">
        <form action="https://awesomewm.org/bugs/index.php" method="get">
          <div>
            <button type="submit">Show Task #</button>
            <input id="taskid" name="show_task" class="text" type="text" size="10" accesskey="t" />
          </div>
        </form>
      </div>

      <div class="clear"></div>
            <div id="intromessage">Welcome to awesome bug tracking system.</div>
      <div id="taskdetails">
<span id="navigation">   <del>&#160;<a href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=822&amp;project=1&amp;opened=511&amp;status%5B0%5D=" title="Duplicate | croping images | 100%"  id = "prev" accesskey = "p" class = "closedtasklink">Previous task</a>&#160;</del>     |     <a href="https://awesomewm.org/bugs/index.php?project=1&amp;do=index&amp;opened=511&amp;status%5B0%5D=">Tasklist</a>
   |     <a href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=798&amp;project=1&amp;opened=511&amp;status%5B0%5D=" title="Unconfirmed | handling modal windows | 0%"  id = "next" accesskey = "n">Next task</a>  </span>

  <h2 class="summary severity2">
	 FS#821 - xcompmgr and awesome menus  </h2>

  <div id="fineprint">
	 Attached to Project:
	 <a href="/bugs/index.php?project=1">awesome</a>
	 <br />
	 Opened by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=511">Roman Kosenko (kite)</a>     	 - Saturday, 18 September 2010, 00:58 GMT 	 	 <br />
	 Last edited by  <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a>	 - Friday, 10 December 2010, 18:59 GMT 	   </div>

  <table><tr><td id="taskfieldscell">
  <div id="taskfields">
	 <table>
		<tr>
		  <th id="tasktype">Task Type</th>
		  <td headers="tasktype">Bug Report</td>
		</tr>
		<tr>
		  <th id="category">Category</th>
		  <td headers="category">
			 			 Core		  </td>
		</tr>
		<tr>
		  <th id="status">Status</th>
		  <td headers="status">
			 			 Closed			 		  </td>
		</tr>
		<tr>
		  <th id="assignedto">Assigned To</th>
		  <td headers="assignedto">
			 			 No-one			 		  </td>
		</tr>
		<tr>
		  <th id="os">Operating System</th>
		  <td headers="os">All</td>
		</tr>
		<tr>
		  <th id="severity">Severity</th>
		  <td headers="severity">Low</td>
		</tr>
		<tr>
		  <th id="priority">Priority</th>
		  <td headers="priority">Normal</td>
		</tr>
		<tr>
		  <th id="reportedver">Reported Version</th>
		  <td headers="reportedver">git/3.4</td>
		</tr>
		<tr>
		  <th id="dueversion">Due in Version</th>
		  <td headers="dueversion">
			 			 Undecided			 		  </td>
		</tr>
		<tr>
		  <th id="duedate">Due Date</th>
		  <td headers="duedate">
			 Undecided		  </td>
		</tr>
		<tr>
		  <th id="percent">Percent Complete</th>
		  <td headers="percent">
			 <img src="https://awesomewm.org/bugs/themes/Bluey/percent-100.png"
				title="100% complete"
				alt="100%" />
		  </td>
		</tr>
        <tr class="votes">
		  <th id="votes">Votes</th>
		  <td headers="votes">
                    <a href="javascript:showhidestuff('showvotes')">2 </a>
          <div id="showvotes" class="hide">
              <ul class="reports">
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=682">marco (mpfusion)</a> (2012-02-15)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=511">Roman Kosenko (kite)</a> (2010-09-20)</li>
                            </ul>
          </div>
                              </td>
        </tr>
        <tr>
		  <th id="private">Private</th>
		  <td headers="private">
                        No            
                      </td>
        </tr>
        	 </table>
  </div>

  </td><td>

  <div id="taskdetailsfull">
	 <h3 class="taskdesc">Details</h3>
     <div id="taskdetailstext">I know what you say... &quot;this isn&#039;t awesome bug&quot;, but problem still exists.<br />
For supporting window&#039;s transparency many people use xcompmgr in additional to awesome, but I have some troubles with it. Menus aren&#039;t drawing fully - only several first items are displayed and rest ones will shown only if you move mouse over them or select from keyboard. Look at this screenshot (this is one menu of clients):<br /><a href="
http://img295.imageshack.us/img295/2241/shot20100917184947.png">
http://img295.imageshack.us/img295/2241/shot20100917184947.png</a><br />
This problem disappears when I kill xcompmgr.<br />
Also some small area of screen (size of current systray, at position 0x0) isn&#039;t updatable after restarting awaesome. Restarting xcompmgr resolve this problem.<br />
I&#039;m using last version 1.1.5 of xcompmgr without patches. And I didn&#039;t have any troubles with it in xmonad.</div>

       
  </div>

  </td></tr></table>

  <div id="taskinfo">
	 <div id="taskdeps">
		<b>This task depends upon</b>
		<br />
		
		<br class="DoNotPrint" />

		
			 </div>

	 <div id="taskblocks">
        			 </div>
  </div>

    <div id="taskclosed">
      Closed by&nbsp;&nbsp;<a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a><br />
      Friday, 10 December 2010, 18:59 GMT <br />
      <strong>Reason for closing:</strong> &nbsp;Won&#039;t fix<br />
            <strong>Additional comments about closing:</strong> &nbsp;Partly duplicate of <del>&#160;<a
href="https://awesomewm.org/bugs/index.p
hp?do=details&amp;task_id=591&amp;projec
t=1&amp;opened=511&amp;status%5B0%5D="
title="Implemented | Rewrite awful.menu
using widget layout | 100%"  class =
"closedtasklink">FS#591</a>&#160;</del>
and half this bug was split away into
<del>&#160;<a
href="https://awesomewm.org/bugs/index.p
hp?do=details&amp;task_id=828&amp;projec
t=1&amp;opened=511&amp;status%5B0%5D="
title="Fixed | Setting
_NET_WM_WINDOW_TYPE for
override-redirect windows | 100%"  class
=
"closedtasklink">FS#828</a>&#160;</del>.
All that is left is a bug in xcompmgr
that I don&#039;t feel like trying to
fix. It&#039;s a race condition and
hacking around that sounds unstable.        </div>
  
  <div id="actionbuttons">
	 
	 
	 	   </div>
</div>
<ul id="submenu">
    <li id="commentstab">
  <a href="#comments">Comments (10)</a>
  </li>
  
  <li id="relatedtab">
  <a href="#related">Related Tasks (0/0)</a>
  </li>

  
  </ul>
<div id="comments" class="tab">
    <em>
    <a name="comment2374" id="comment2374"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=821#comment2374">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Saturday, 18 September 2010, 07:37 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">&#039;I know what you say... &quot;this isn&#039;t awesome bug&quot;, but problem still exists.&#039;<br />
<br />
Ok, so what do you want us to do about it then?</div></div>

  
    <em>
    <a name="comment2379" id="comment2379"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=821#comment2379">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=511">Roman Kosenko (kite)</a> -
    Sunday, 19 September 2010, 00:32 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">&gt; Ok, so what do you want us to do about it then?<br />
Investigate this problem, I think it can be resolved on awesome side. At least we can loop over elements and call item_enter/item_leave during menu show, but I think there is more beautiful solution.<br />
As for me - I don&#039;t use menus for now, but there are other users and xcompmgr is common way to add compositing support in awesome.<br />
<br />
P.S. There is other alternative solution - add compositing support directly in awesome. But I think easily make it works with xcompmgr. :)</div></div>

  
    <em>
    <a name="comment2380" id="comment2380"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=821#comment2380">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=511">Roman Kosenko (kite)</a> -
    Monday, 20 September 2010, 13:31 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Menus in awesome are very curious... Each item in menu is a separate window (!). These numerous windows are normal (have no _NET_WM_WINDOW_TYPE) and I don&#039;t know why they have _NET_WM_STRUT_PARTIAL is set. So, compositing manager decorates each of these windows.<br />
Problem with hidden menu items at start can be resolved by adding some painting after mapping (xcompmgr need to receive event from xdamage). I prefer patch xcompmgr a little, because this is their bug. But for proper decoration (like shadows) by any compositing manager it&#039;s need to change awesome.<br />
<br />
Also I suggest to set _NET_WM_WINDOW_TYPE in _NET_WM_WINDOW_TYPE_DOCK for dock wiboxes. In this case compositing manager can ignore them during decoration and don&#039;t add shadows (xcompmgr don&#039;t check for non-zero _NET_WM_STRUT_PARTIAL).<br />
<br /></div></div>

  
    <em>
    <a name="comment2386" id="comment2386"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=821#comment2386">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Monday, 27 September 2010, 09:57 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">&gt;  Each item in menu is a separate window (!).<br />
awful.menu was written back when we didn&#039;t have a way to do arbitrary layouts from lua. This was the only possible way at that time.<br />
<br />
&gt; by adding some painting after mapping <br />
Uhm, we already do some painting after mapping. Else the menu windows wouldn&#039;t display anything, would they? After all, drawing to an unmapped window is just ignored. So I bet we already generate damage events on menu windows.<br />
<br />
For _NET_WM_STRUT_PARTIAL: EWMH doesn&#039;t seem to say anything about all values being zero. I guess we should make ewmh_update_strut() more intelligent and only set the property if some value is different from zero.<br />
<br />
Setting _NET_WM_WINDOW_TYPE would mean we need to add a way for lua to set that property on wiboxes. Do we really need and want that just to paper over xcompmgr bugs? IMHO xcompmgr should (optionally) just not add shadows to override-redirect windows.<br /></div></div>

  
    <em>
    <a name="comment2389" id="comment2389"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=821#comment2389">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=511">Roman Kosenko (kite)</a> -
    Monday, 27 September 2010, 15:44 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">&gt; Uhm, we already do some painting after mapping.<br />
Only first item through item_enter (3.4 branch).<br />
I didn&#039;t look deeply, but I cannot see where you paint after mapping.<br />
And if I add some painting - this problem become solved.<br />
It also can be solved by marking window as damaged in xcompmgr during mapping (don&#039;t wait for XDamageNotify).<br />
I&#039;ve tried Unagi (compositing manager which is implemented using xcb), it seems like it have this problem too.<br />
<br />
&gt; Do we really need and want that just to paper over xcompmgr bugs? IMHO xcompmgr should (optionally) just not add shadows to override-redirect windows.<br />
xcompmgr is very buggy thing, but this is not xcompmgr bug.<br />
It have optionally check for _NET_WM_WINDOW_TYPE=_NET_WM_WINDOW_TYPE_DOCK and not for all override-redirect windows (because in this case we lost shadows under menus).<br />
Also I forgot that according EWMH (http://standards.freedesktop.org/wm-spec/wm-spec-1.4.html#id2551529):<br />
&quot;This hint SHOULD also be set for override-redirect windows to allow compositing managers to apply consistent decorations to menus, tooltips etc.&quot;<br />
So, this is awesome bug. :)<br /></div></div>

  
    <em>
    <a name="comment2390" id="comment2390"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=821#comment2390">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Monday, 27 September 2010, 17:09 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">To quote the source code (shortened for readability):<br />
<br />
static void<br />
wibox_map(wibox_t *wibox)<br />
{<br />
    xcb_map_window(globalconf.connection, wibox-&gt;window);<br />
    wibox_need_update(wibox);<br />
}<br />
<br />
static void<br />
wibox_draw(wibox_t *wibox)<br />
{<br />
    if(wibox-&gt;visible)<br />
    {<br />
        widget_render(wibox);<br />
        wibox_refresh_pixmap(wibox);<br />
        wibox-&gt;need_update = false;<br />
    }<br />
}<br />
<br />
void<br />
wibox_refresh(void)<br />
{<br />
    foreach(w, globalconf.wiboxes)<br />
    {<br />
        if((*w)-&gt;need_update)<br />
            wibox_draw(*w);<br />
    }<br />
}<br />
<br />
wibox_refresh() is called all the time via awesome_refresh(). So we do draw the wibox after it was mapped. This got to cause some damage events, I guess.<br /></div></div>

  
    <em>
    <a name="comment2391" id="comment2391"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=821#comment2391">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Monday, 27 September 2010, 17:12 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Could we split the _NET_WM_WINDOW_TYPE into a seperate feature-request issue? I hate mixing stuff.</div></div>

  
    <em>
    <a name="comment2392" id="comment2392"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=821#comment2392">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=511">Roman Kosenko (kite)</a> -
    Monday, 27 September 2010, 18:44 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">&gt; Could we split the _NET_WM_WINDOW_TYPE into a seperate feature-request issue? I hate mixing stuff.<br />
Ok, I&#039;ve created new ticket <del>&#160;<a href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=828&amp;project=1&amp;opened=511&amp;status%5B0%5D=" title="Fixed | Setting _NET_WM_WINDOW_TYPE for override-redirect windows | 100%"  class = "closedtasklink">FS#828</a>&#160;</del>.<br />
<br />
&gt; wibox_refresh() is called all the time via awesome_refresh(). So we do draw the wibox after it was mapped. This got to cause some damage events, I guess.<br />
Ah... This is doing from global loop.<br />
Maybe is damage events generated too fast? If xcompmgr didn&#039;t successfully process MapNotify and it can&#039;t properly invalidate window. Let&#039;s see, this works with xcompmgr:<br />
<br />
wibox.visibility = false<br />
wibox.screen = screen_index<br />
util.spawn(&quot;/bin/sh -c &#039;sleep .1&#039;&quot;, false)<br />
wibox.visibility = true<br />
<br />
And this doesn&#039;t work:<br />
<br />
wibox.visibility = false<br />
wibox.screen = screen_index<br />
wibox.visibility = true<br />
<br />
So, this is bug in xcompmgr and can be simply fixed by attached patch (initially sets &#039;damaged&#039; flag after MapNotify event). But in any way xcompmgr contained a lot of other bugs, memory leaks, etc. As I understand this demonstrate program isn&#039;t aimed for every-day use.<br />
<br />
So, let&#039;s discuss awesome bugs... When each item in menu is separate window any abstract compositing manager will decorate them separately. This is not what user want.<br />
Similar problem in titlebar - it is decorated separately from main window.<br /></div></div>

  
    <em>
    <a name="comment2393" id="comment2393"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=821#comment2393">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=511">Roman Kosenko (kite)</a> -
    Monday, 27 September 2010, 18:45 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Patch for xcompmgr (if somebody wants workaround fix of this problem)</div></div>

      <div class="attachments">
          <a title="0002-fix-paint-new-windows.patch" href="?getfile=357" >
                <img src="https://awesomewm.org/bugs/themes/Bluey/mime/text.png" alt="" title="text/plain" />
            &nbsp;&nbsp;
            0002-fix-paint-new-windows.pa...
                  </a>
                  (0.8 KiB)
          <br />
    </div>
  

    <em>
    <a name="comment2394" id="comment2394"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=821#comment2394">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Monday, 27 September 2010, 19:01 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Thanks for <del>&#160;<a href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=828&amp;project=1&amp;opened=511&amp;status%5B0%5D=" title="Fixed | Setting _NET_WM_WINDOW_TYPE for override-redirect windows | 100%"  class = "closedtasklink">FS#828</a>&#160;</del>, will try to come up with something when I find the time.<br />
<br />
For the xcompmgr bug: Are we really the only app that does it like this? For normal windows, one has to wait until MapNotify and/or Expose events before one can draw stuff, so that should give xcompmgr enough time to do whatever it has to do. But menus and all windows that are created by WMs could cause this lost damage event.<br />
<br />
For the menu: This is <del>&#160;<a href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=591&amp;project=1&amp;opened=511&amp;status%5B0%5D=" title="Implemented | Rewrite awful.menu using widget layout | 100%"  class = "closedtasklink">FS#591</a>&#160;</del> and no one was bored enough to break the menu yet.<br />
<br />
So does this mean we agree that this is an xcompmgr bug that we cant really work around? How would awesome work around it? (We do draw before the MapNotify/Expose to display the proper content in the window quicker)<br />
Can this be closed?</div></div>

  
  
  </div>
<div id="related" class="tab">
  <table>    <tr><td>
    <form method="post" action="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=821#related" >
        <table id="tasks_related" class="userlist">
        <tr>
          <th>
            <a href="javascript:ToggleSelected('tasks_related')">
              <img title="Toggle Selected" alt="Toggle Selected" src="https://awesomewm.org/bugs/themes/Bluey/kaboodleloop.png" width="16" height="16" />
            </a>
          </th>
          <th>Tasks related to this task (0)</th>
        </tr>
                <tr>
          <td colspan="2">
            <input type="hidden" name="action" value="remove_related" />
            <input type="hidden" name="task_id" value="821" />
            <button type="submit">Remove</button>
          </td>
        </tr>
        </table>
    </form>
    </td><td>
    
    <table id="duplicate_tasks" class="userlist">
        <tr>
          <th>Duplicate tasks of this task (0)</th>
        </tr>
            </table>
    </td></tr>
  </table>

  </div>
<div id="history" class="tab">
  <h3>Loading...</h3>
</div>
    </div>
    <p id="footer">
       <!-- Please don't remove this line - it helps promote Flyspray -->
       <a href="http://flyspray.org/" class="offsite">Powered by Flyspray</a>
    </p>
  </div>
  </body>
</html>
