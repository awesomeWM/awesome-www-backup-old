<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-AU" xml:lang="en-AU">
  <head>
    <title>FS#1207 : GNU Octave 3.8 GUI  is unmapped</title>

    <meta name="description" content="Flyspray, a Bug Tracking System written in PHP." />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript" />
    <meta http-equiv="Content-Style-Type" content="text/css" />

    <link rel="icon" type="image/png" href="https://awesomewm.org/bugs/themes/Bluey/favicon.ico" />
    <link rel="index" id="indexlink" type="text/html" href="https://awesomewm.org/bugs/" />
        <link media="screen" href="https://awesomewm.org/bugs/themes/Bluey/theme.css" rel="stylesheet" type="text/css" />
    <link media="print"  href="https://awesomewm.org/bugs/themes/Bluey/theme_print.css" rel="stylesheet" type="text/css" />
    <link rel="alternate" type="application/rss+xml" title="Flyspray RSS 1.0 Feed"
          href="https://awesomewm.org/bugs/feed.php?feed_type=rss1&amp;project=1" />
    <link rel="alternate" type="application/rss+xml" title="Flyspray RSS 2.0 Feed"
          href="https://awesomewm.org/bugs/feed.php?feed_type=rss2&amp;project=1" />
	<link rel="alternate" type="application/atom+xml" title="Flyspray Atom 0.3 Feed"
	      href="https://awesomewm.org/bugs/feed.php?feed_type=atom&amp;project=1" />

    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/prototype/prototype.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/script.aculo.us/scriptaculous.js"></script>
            <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/details.js"></script>
                <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/tabs.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/functions.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/calendar_stripped.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/calendar-setup_stripped.js"> </script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/lang/calendar-en.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/lightbox/js/lightbox.js"></script>
    <link rel="stylesheet" href="https://awesomewm.org/bugs/javascript/lightbox/css/lightbox.css" type="text/css" media="screen" />
    <!--[if IE]>
    <link media="screen" href="https://awesomewm.org/bugs/themes/Bluey/ie.css" rel="stylesheet" type="text/css" />
    <![endif]-->
      </head>
  <body onload="perms = new Perms('permissions');">

  <div id="container">
    <!-- Remove this to remove the logo -->
    <h1 id="title"><a href="https://awesomewm.org/bugs/">awesome</a></h1>

    <div id="menu">

<form id="login" action="https://awesomewm.org/bugs/index.php?do=authenticate" method="post">
<div>
  <label for="lbl_user_name">Username</label>
  <input class="text" type="text" id="lbl_user_name" name="user_name" size="17" maxlength="30" />

  <label for="lbl_password">Password</label>
  <input class="password" type="password" id="lbl_password" name="password" size="17" maxlength="30" />

  <label for="lbl_remember">Remember me</label>
  <input type="checkbox" id="lbl_remember" name="remember_login" />
  
  <input type="hidden" name="return_to" value="/bugs/index.php?do=details&amp;task_id=1207&amp;project=1&amp;opened=942&amp;status%5B0%5D=" />

  <button accesskey="l" type="submit">Login!</button>

  <span id="links">
            <a id="forgotlink" href="https://awesomewm.org/bugs/index.php?do=lostpw">Lost password?</a>
      </span>
</div>
</form>
</div>

<div id="pm-menu">

<div id="projectselector">
    <form id="projectselectorform" action="https://awesomewm.org/bugs/index.php" method="get">
       <div>
        <select name="project" onChange="document.getElementById('projectselectorform').submit()">
          <option value="0">All Projects</option>        </select>
        <button type="submit">Switch</button>
        <input type="hidden" name="do" value="details" />
        <input type="hidden" value="1" name="switch" />
              </div>
    </form>
</div>

<ul id="pm-menu-list">
    <li class="first">
      <a id="toplevellink" href="https://awesomewm.org/bugs/index.php?do=toplevel&amp;project=1">Overview</a>
    </li>

    <li>
    <a id="homelink"
        href="https://awesomewm.org/bugs/index.php?project=1&amp;do=index">Tasklist</a>
    </li>

    
    
        <li>
    <a id="roadmaplink"
        href="https://awesomewm.org/bugs/index.php?do=roadmap&amp;project=1">Roadmap</a>
    </li>
    
    
    </ul>
</div>

    
    <div id="content">
      <div id="showtask">
        <form action="https://awesomewm.org/bugs/index.php" method="get">
          <div>
            <button type="submit">Show Task #</button>
            <input id="taskid" name="show_task" class="text" type="text" size="10" accesskey="t" />
          </div>
        </form>
      </div>

      <div class="clear"></div>
            <div id="intromessage">Welcome to awesome bug tracking system.</div>
      <div id="taskdetails">
<span id="navigation">   <del>&#160;<a href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=1279&amp;project=1&amp;opened=942&amp;status%5B0%5D=" title="Duplicate | Dead keys (and compose key) not working in prompt | 100%"  id = "prev" accesskey = "p" class = "closedtasklink">Previous task</a>&#160;</del>     |     <a href="https://awesomewm.org/bugs/index.php?project=1&amp;do=index&amp;opened=942&amp;status%5B0%5D=">Tasklist</a>
   |     <a href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=1271&amp;project=1&amp;opened=942&amp;status%5B0%5D=" title="Unconfirmed | Placment rule for xcalc only obeyed some times | 0%"  id = "next" accesskey = "n">Next task</a>  </span>

  <h2 class="summary severity2">
	 FS#1207 - GNU Octave 3.8 GUI  is unmapped  </h2>

  <div id="fineprint">
	 Attached to Project:
	 <a href="/bugs/index.php?project=1">awesome</a>
	 <br />
	 Opened by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=942">David Fabijan (McLenin)</a>     	 - Monday, 03 February 2014, 09:24 GMT 	 	 <br />
	 Last edited by  <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a>	 - Monday, 03 February 2014, 20:49 GMT 	   </div>

  <table><tr><td id="taskfieldscell">
  <div id="taskfields">
	 <table>
		<tr>
		  <th id="tasktype">Task Type</th>
		  <td headers="tasktype">Bug Report</td>
		</tr>
		<tr>
		  <th id="category">Category</th>
		  <td headers="category">
			 			 Core		  </td>
		</tr>
		<tr>
		  <th id="status">Status</th>
		  <td headers="status">
			 			 Closed			 		  </td>
		</tr>
		<tr>
		  <th id="assignedto">Assigned To</th>
		  <td headers="assignedto">
			 			 No-one			 		  </td>
		</tr>
		<tr>
		  <th id="os">Operating System</th>
		  <td headers="os">Linux</td>
		</tr>
		<tr>
		  <th id="severity">Severity</th>
		  <td headers="severity">Low</td>
		</tr>
		<tr>
		  <th id="priority">Priority</th>
		  <td headers="priority">Normal</td>
		</tr>
		<tr>
		  <th id="reportedver">Reported Version</th>
		  <td headers="reportedver">3.5.2</td>
		</tr>
		<tr>
		  <th id="dueversion">Due in Version</th>
		  <td headers="dueversion">
			 			 Undecided			 		  </td>
		</tr>
		<tr>
		  <th id="duedate">Due Date</th>
		  <td headers="duedate">
			 Undecided		  </td>
		</tr>
		<tr>
		  <th id="percent">Percent Complete</th>
		  <td headers="percent">
			 <img src="https://awesomewm.org/bugs/themes/Bluey/percent-100.png"
				title="100% complete"
				alt="100%" />
		  </td>
		</tr>
        <tr class="votes">
		  <th id="votes">Votes</th>
		  <td headers="votes">
                    0
                              </td>
        </tr>
        <tr>
		  <th id="private">Private</th>
		  <td headers="private">
                        No            
                      </td>
        </tr>
        	 </table>
  </div>

  </td><td>

  <div id="taskdetailsfull">
	 <h3 class="taskdesc">Details</h3>
     <div id="taskdetailstext">After installing the 3.8 version of Octave I noticed that the new experimental GUI (stated from the terminal with &quot;octave --force-gui&quot;) doesn&#039;t seem to work in awesome. By &quot;doesn&#039;t seem to work&quot; I mean that the program start and the window is created, but it is not shown on the desktop. The result of xwininfo is:<br />
<br />
xwininfo: Window id: 0x300000f &quot;Octave&quot;<br />
<br />
  Absolute upper-left X:  0<br />
  Absolute upper-left Y:  18<br />
  Relative upper-left X:  0<br />
  Relative upper-left Y:  18<br />
  Width: 796<br />
  Height: 638<br />
  Depth: 24<br />
  Visual: 0x20<br />
  Visual Class: TrueColor<br />
  Border width: 0<br />
  Class: InputOutput<br />
  Colormap: 0x22 (installed)<br />
  Bit Gravity State: NorthWestGravity<br />
  Window Gravity State: NorthWestGravity<br />
  Backing Store State: NotUseful<br />
  Save Under State: no<br />
  Map State: IsUnMapped<br />
  Override Redirect State: no<br />
  Corners:  +0+18  -1124+18  -1124-424  +0-424<br />
  -geometry 796x638+0+18<br />
 <br />
The problem only appears in awesome. Or at least it doesn&#039;t appear in either i3 or openbox (haven&#039;t tested any other WM&#039;s). My OS is an up to date (February 3. 2014) Arch Linux with the 3.12.9 kernel. The problem can be replacted in either the stable 3.5.2 release or the master git version.<br />
<br /></div>

       
  </div>

  </td></tr></table>

  <div id="taskinfo">
	 <div id="taskdeps">
		<b>This task depends upon</b>
		<br />
		
		<br class="DoNotPrint" />

		
			 </div>

	 <div id="taskblocks">
        			 </div>
  </div>

    <div id="taskclosed">
      Closed by&nbsp;&nbsp;<a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a><br />
      Monday, 03 February 2014, 20:49 GMT <br />
      <strong>Reason for closing:</strong> &nbsp;Not a bug<br />
        </div>
  
  <div id="actionbuttons">
	 
	 
	 	   </div>
</div>
<ul id="submenu">
    <li id="commentstab">
  <a href="#comments">Comments (1)</a>
  </li>
  
  <li id="relatedtab">
  <a href="#related">Related Tasks (0/0)</a>
  </li>

  
  </ul>
<div id="comments" class="tab">
    <em>
    <a name="comment3795" id="comment3795"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=1207#comment3795">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Monday, 03 February 2014, 20:49 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">No idea what octave is doing, but it opens a window and immediately closes it again, then tries to re-open it again too quickly. I can&#039;t see awesome doing anything wrong here.<br />
<br />
Relevant part of xtrace is (I verified that this is the right window by also xtrace&#039;ing awesome):<br />
<br />
002:&lt;:01ee:  8: Request(8): MapWindow window=0x0060000d<br />
002:&lt;:01ef: 44: Request(25): SendEvent propagate=false(0x00) destination=0x00000053 event-mask=PropertyChange ClientMessage(33) format=0x08 window=0x0060000d type=0x12b(&quot;_NET_STARTUP_INFO_BEGIN&quot;) data=0x72,0x6d,0x76,0x3a,0x49,0x3d,0x77,0x73,0x6d,0x2f,0x2d,0x65,0x6d,0x6e,0x6c,0x65,0x75,0x61,0x6f,0x2f;<br />
002:&lt;:01f0: 44: Request(25): SendEvent propagate=false(0x00) destination=0x00000053 event-mask=PropertyChange ClientMessage(33) format=0x08 window=0x0060000d type=0x12c(&quot;_NET_STARTUP_INFO&quot;) data=0x2d,0x65,0x6d,0x6e,0x6c,0x65,0x75,0x61,0x6f,0x2f,0x37,0x34,0x31,0x35,0x70,0x79,0x75,0x5f,0x49,0x45;<br />
002:&lt;:01f1: 44: Request(25): SendEvent propagate=false(0x00) destination=0x00000053 event-mask=PropertyChange ClientMessage(33) format=0x08 window=0x0060000d type=0x12c(&quot;_NET_STARTUP_INFO&quot;) data=0x37,0x34,0x31,0x35,0x70,0x79,0x75,0x5f,0x49,0x45,0x30,0x30,0x39,0x36,0x00,0x79,0x75,0x5f,0x49,0x45;<br />
002:&lt;:01f2: 44: Request(25): SendEvent propagate=false(0x00) destination=0x00000053 event-mask=PropertyChange ClientMessage(33) format=0x08 window=0x0060000d type=0x12c(&quot;_NET_STARTUP_INFO&quot;) data=0x54,0x4d,0x31,0x36,0x32,0x32,0x38,0x00,0x49,0x45,0x30,0x30,0x39,0x36,0x00,0x79,0x75,0x5f,0x49,0x45;<br />
002:&lt;:01f3: 44: Request(25): SendEvent propagate=false(0x00) destination=0x00000053 event-mask=PropertyChange ClientMessage(33) format=0x08 window=0x0060000d type=0x12c(&quot;_NET_STARTUP_INFO&quot;) data=0x32,0x32,0x38,0x00,0x32,0x32,0x38,0x00,0x49,0x45,0x30,0x30,0x39,0x36,0x00,0x79,0x75,0x5f,0x49,0x45;<br />
002:&lt;:01f4: 44: Request(25): SendEvent propagate=false(0x00) destination=0x00000053 event-mask=PropertyChange ClientMessage(33) format=0x08 window=0x0060000d type=0x12c(&quot;_NET_STARTUP_INFO&quot;) data=0x38,0x00,0x38,0x00,0x32,0x32,0x38,0x00,0x49,0x45,0x30,0x30,0x39,0x36,0x00,0x79,0x75,0x5f,0x49,0x45;<br />
002:&lt;:01f5: 44: Request(25): SendEvent propagate=false(0x00) destination=0x00000053 event-mask=PropertyChange ClientMessage(33) format=0x08 window=0x0060000d type=0x12c(&quot;_NET_STARTUP_INFO&quot;) data=0x00,0x00,0x38,0x00,0x32,0x32,0x38,0x00,0x49,0x45,0x30,0x30,0x39,0x36,0x00,0x79,0x75,0x5f,0x49,0x45;<br />
002:&lt;:01f6:  8: Request(10): UnmapWindow window=0x0060000d<br />
002:&lt;:01f7: 44: Request(25): SendEvent propagate=false(0x00) destination=0x00000053 event-mask=SubstructureNotify,SubstructureRedirect UnmapNotify(18) event=0x00000053 window=0x0060000d from-configure=false(0x00)<br />
[...]<br />
002:&gt;:01f7: Event PropertyNotify(28) window=0x0060000d atom=0x123(&quot;WM_STATE&quot;) time=0x065a2499 state=NewValue(0x00)<br />
(This is the first &quot;WM_STATE&quot; PropertyNotify, so this must mean that the window is now mapped and managed by awesome)<br />
[...]<br />
002:&lt;:0203:  8: Request(8): MapWindow window=0x0060000d<br />
[...]<br />
002:&gt;:0275: Event PropertyNotify(28) window=0x0060000d atom=0x123(&quot;WM_STATE&quot;) time=0x065a24d9 state=NewValue(0x00)<br />
(This is the second &quot;WM_STATE&quot; PropertyNotify, so only at sequence number 0275 did the withdrawal finish)<br />
[...]<br />
<br />
As anyone (who knows some X11) can see, octave is violating ICCCM ยง 4.1.4:<br />
<br />
  When a client withdraws a window, the window manager will then update or remove the WM_STATE property as described in section 4.1.3.1. Clients that want to re-use a client window (e.g. by mapping it again or reparenting it elsewhere) after withdrawing it must wait for the withdrawal to be complete before proceeding. The preferred method for doing this is for clients to wait for the window manager to update or remove the WM_STATE property. [12]</div></div>

  
  
  </div>
<div id="related" class="tab">
  <table>    <tr><td>
    <form method="post" action="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=1207#related" >
        <table id="tasks_related" class="userlist">
        <tr>
          <th>
            <a href="javascript:ToggleSelected('tasks_related')">
              <img title="Toggle Selected" alt="Toggle Selected" src="https://awesomewm.org/bugs/themes/Bluey/kaboodleloop.png" width="16" height="16" />
            </a>
          </th>
          <th>Tasks related to this task (0)</th>
        </tr>
                <tr>
          <td colspan="2">
            <input type="hidden" name="action" value="remove_related" />
            <input type="hidden" name="task_id" value="1207" />
            <button type="submit">Remove</button>
          </td>
        </tr>
        </table>
    </form>
    </td><td>
    
    <table id="duplicate_tasks" class="userlist">
        <tr>
          <th>Duplicate tasks of this task (0)</th>
        </tr>
            </table>
    </td></tr>
  </table>

  </div>
<div id="history" class="tab">
  <h3>Loading...</h3>
</div>
    </div>
    <p id="footer">
       <!-- Please don't remove this line - it helps promote Flyspray -->
       <a href="http://flyspray.org/" class="offsite">Powered by Flyspray</a>
    </p>
  </div>
  </body>
</html>
