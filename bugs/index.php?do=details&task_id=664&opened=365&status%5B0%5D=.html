<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-AU" xml:lang="en-AU">
  <head>
    <title>FS#664 : awful.rules</title>

    <meta name="description" content="Flyspray, a Bug Tracking System written in PHP." />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript" />
    <meta http-equiv="Content-Style-Type" content="text/css" />

    <link rel="icon" type="image/png" href="https://awesomewm.org/bugs/themes/Bluey/favicon.ico" />
    <link rel="index" id="indexlink" type="text/html" href="https://awesomewm.org/bugs/" />
        <link media="screen" href="https://awesomewm.org/bugs/themes/Bluey/theme.css" rel="stylesheet" type="text/css" />
    <link media="print"  href="https://awesomewm.org/bugs/themes/Bluey/theme_print.css" rel="stylesheet" type="text/css" />
    <link rel="alternate" type="application/rss+xml" title="Flyspray RSS 1.0 Feed"
          href="https://awesomewm.org/bugs/feed.php?feed_type=rss1&amp;project=1" />
    <link rel="alternate" type="application/rss+xml" title="Flyspray RSS 2.0 Feed"
          href="https://awesomewm.org/bugs/feed.php?feed_type=rss2&amp;project=1" />
	<link rel="alternate" type="application/atom+xml" title="Flyspray Atom 0.3 Feed"
	      href="https://awesomewm.org/bugs/feed.php?feed_type=atom&amp;project=1" />

    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/prototype/prototype.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/script.aculo.us/scriptaculous.js"></script>
            <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/details.js"></script>
                <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/tabs.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/functions.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/calendar_stripped.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/calendar-setup_stripped.js"> </script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/lang/calendar-en.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/lightbox/js/lightbox.js"></script>
    <link rel="stylesheet" href="https://awesomewm.org/bugs/javascript/lightbox/css/lightbox.css" type="text/css" media="screen" />
    <!--[if IE]>
    <link media="screen" href="https://awesomewm.org/bugs/themes/Bluey/ie.css" rel="stylesheet" type="text/css" />
    <![endif]-->
      </head>
  <body onload="perms = new Perms('permissions');">

  <div id="container">
    <!-- Remove this to remove the logo -->
    <h1 id="title"><a href="https://awesomewm.org/bugs/">awesome</a></h1>

    <div id="menu">

<form id="login" action="https://awesomewm.org/bugs/index.php?do=authenticate" method="post">
<div>
  <label for="lbl_user_name">Username</label>
  <input class="text" type="text" id="lbl_user_name" name="user_name" size="17" maxlength="30" />

  <label for="lbl_password">Password</label>
  <input class="password" type="password" id="lbl_password" name="password" size="17" maxlength="30" />

  <label for="lbl_remember">Remember me</label>
  <input type="checkbox" id="lbl_remember" name="remember_login" />
  
  <input type="hidden" name="return_to" value="/bugs/index.php?do=details&amp;task_id=664&amp;opened=365&amp;status%5B0%5D=" />

  <button accesskey="l" type="submit">Login!</button>

  <span id="links">
            <a id="forgotlink" href="https://awesomewm.org/bugs/index.php?do=lostpw">Lost password?</a>
      </span>
</div>
</form>
</div>

<div id="pm-menu">

<div id="projectselector">
    <form id="projectselectorform" action="https://awesomewm.org/bugs/index.php" method="get">
       <div>
        <select name="project" onChange="document.getElementById('projectselectorform').submit()">
          <option value="0">All Projects</option>        </select>
        <button type="submit">Switch</button>
        <input type="hidden" name="do" value="details" />
        <input type="hidden" value="1" name="switch" />
              </div>
    </form>
</div>

<ul id="pm-menu-list">
    <li class="first">
      <a id="toplevellink" href="https://awesomewm.org/bugs/index.php?do=toplevel&amp;project=1">Overview</a>
    </li>

    <li>
    <a id="homelink"
        href="https://awesomewm.org/bugs/index.php?project=1&amp;do=index">Tasklist</a>
    </li>

    
    
        <li>
    <a id="roadmaplink"
        href="https://awesomewm.org/bugs/index.php?do=roadmap&amp;project=1">Roadmap</a>
    </li>
    
    
    </ul>
</div>

    
    <div id="content">
      <div id="showtask">
        <form action="https://awesomewm.org/bugs/index.php" method="get">
          <div>
            <button type="submit">Show Task #</button>
            <input id="taskid" name="show_task" class="text" type="text" size="10" accesskey="t" />
          </div>
        </form>
      </div>

      <div class="clear"></div>
            <div id="intromessage">Welcome to awesome bug tracking system.</div>
      <div id="taskdetails">
<span id="navigation">   <del>&#160;<a href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=805&amp;opened=365&amp;status%5B0%5D=" title="Not a bug | systray does not clean up | 100%"  id = "prev" accesskey = "p" class = "closedtasklink">Previous task</a>&#160;</del>     |     <a href="https://awesomewm.org/bugs/index.php?project=1&amp;do=index&amp;opened=365&amp;status%5B0%5D=">Tasklist</a>
   |     <del>&#160;<a href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=651&amp;opened=365&amp;status%5B0%5D=" title="Fixed | naughty should check icon file for changes | 100%"  id = "next" accesskey = "n" class = "closedtasklink">Next task</a>&#160;</del>  </span>

  <h2 class="summary severity2">
	 FS#664 - awful.rules  </h2>

  <div id="fineprint">
	 Attached to Project:
	 <a href="/bugs/index.php?project=1">awesome</a>
	 <br />
	 Opened by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=365">saucerful (saucerful)</a>     	 - Friday, 23 October 2009, 03:51 GMT 	 	 <br />
	 Last edited by  <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=1">Julien Danjou (jd)</a>	 - Friday, 08 January 2010, 18:13 GMT 	   </div>

  <table><tr><td id="taskfieldscell">
  <div id="taskfields">
	 <table>
		<tr>
		  <th id="tasktype">Task Type</th>
		  <td headers="tasktype">Bug Report</td>
		</tr>
		<tr>
		  <th id="category">Category</th>
		  <td headers="category">
			 			 Lua libraries &#8594;
			 			 awful		  </td>
		</tr>
		<tr>
		  <th id="status">Status</th>
		  <td headers="status">
			 			 Closed			 		  </td>
		</tr>
		<tr>
		  <th id="assignedto">Assigned To</th>
		  <td headers="assignedto">
			 			 No-one			 		  </td>
		</tr>
		<tr>
		  <th id="os">Operating System</th>
		  <td headers="os">All</td>
		</tr>
		<tr>
		  <th id="severity">Severity</th>
		  <td headers="severity">Low</td>
		</tr>
		<tr>
		  <th id="priority">Priority</th>
		  <td headers="priority">Normal</td>
		</tr>
		<tr>
		  <th id="reportedver">Reported Version</th>
		  <td headers="reportedver">git/master</td>
		</tr>
		<tr>
		  <th id="dueversion">Due in Version</th>
		  <td headers="dueversion">
			 			 Undecided			 		  </td>
		</tr>
		<tr>
		  <th id="duedate">Due Date</th>
		  <td headers="duedate">
			 Undecided		  </td>
		</tr>
		<tr>
		  <th id="percent">Percent Complete</th>
		  <td headers="percent">
			 <img src="https://awesomewm.org/bugs/themes/Bluey/percent-100.png"
				title="100% complete"
				alt="100%" />
		  </td>
		</tr>
        <tr class="votes">
		  <th id="votes">Votes</th>
		  <td headers="votes">
                    <a href="javascript:showhidestuff('showvotes')">15 </a>
          <div id="showvotes" class="hide">
              <ul class="reports">
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=423">Rafael Fonseca (rfonseca)</a> (2009-12-17)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=406">Renato Cant達o (rfcantao)</a> (2009-11-27)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=388">chisiyuan (chisiyuan)</a> (2009-10-29)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=394">Thomas Jost (Schnouki)</a> (2009-10-29)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=371">Lukas Hrazky (lukash)</a> (2009-10-28)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=390">Christian Cikryt (cio)</a> (2009-10-28)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=389">Nick Hastings (evo2)</a> (2009-10-28)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=387">Greg Dziegielewski (jabbas)</a> (2009-10-27)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=227">Javier Barroso (i5513)</a> (2009-10-27)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=84">anrxc (anrxc)</a> (2009-10-27)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=18">Zsolt Udvari (uzsolt)</a> (2009-10-27)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=329">Pawe? Zuzelski (pawelz)</a> (2009-10-27)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=385">Peter Vibert (seagoon)</a> (2009-10-25)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=203">Damjan (gdamjan)</a> (2009-10-24)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=382">Renato Botelho (rbgarga)</a> (2009-10-23)</li>
                            </ul>
          </div>
                              </td>
        </tr>
        <tr>
		  <th id="private">Private</th>
		  <td headers="private">
                        No            
                      </td>
        </tr>
        	 </table>
  </div>

  </td><td>

  <div id="taskdetailsfull">
	 <h3 class="taskdesc">Details</h3>
     <div id="taskdetailstext">awful.rules is nice.  but it seems that rules don&#039;t get applied immediately.  for example, i have a floating rule and i can see the window launch normally for a instant and then move to floating.  its ugly and uses unnecessary cpu to resize the other windows, etc.</div>

       
  </div>

  </td></tr></table>

  <div id="taskinfo">
	 <div id="taskdeps">
		<b>This task depends upon</b>
		<br />
		
		<br class="DoNotPrint" />

		
			 </div>

	 <div id="taskblocks">
        			 </div>
  </div>

    <div id="taskclosed">
      Closed by&nbsp;&nbsp;<a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=1">Julien Danjou (jd)</a><br />
      Friday, 08 January 2010, 18:13 GMT <br />
      <strong>Reason for closing:</strong> &nbsp;Fixed<br />
            <strong>Additional comments about closing:</strong> &nbsp;commit
a757ddabc4484a9369c30fb28327145df4f37673
<br />
Author: koniu
&lt;gkusnierz@gmail.com&gt;<br />
Date:   Fri Jan 8 15:26:21 2010 +0000<br
/>
<br />
    awful.rules: tag clients without
flicker (<del>&#160;<a
href="https://awesomewm.org/bugs/index.p
hp?do=details&amp;task_id=664&amp;opened
=365&amp;status%5B0%5D=" title="Fixed |
awful.rules | 100%"  class =
"closedtasklink">FS#664</a>&#160;</del>)
<br />
    <br />
    We unregister the default
awful.tag.withcurrent &#039;manage&#039;
signal handler<br />
    and have awful.rules.apply handle
initial client tagging.<br />
    <br />
    Signed-off-by: koniu
&lt;gkusnierz@gmail.com&gt;<br />
    Signed-off-by: Julien Danjou
&lt;julien@danjou.info&gt;<br />        </div>
  
  <div id="actionbuttons">
	 
	 
	 	   </div>
</div>
<ul id="submenu">
    <li id="commentstab">
  <a href="#comments">Comments (24)</a>
  </li>
  
  <li id="relatedtab">
  <a href="#related">Related Tasks (0/1)</a>
  </li>

  
  </ul>
<div id="comments" class="tab">
    <em>
    <a name="comment1483" id="comment1483"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1483">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=203">Damjan (gdamjan)</a> -
    Saturday, 24 October 2009, 05:25 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">This is probably related to the issue I&#039;ve noticed, that is I have the following rule:<br />
<br />
    { rule = { class = &quot;XTerm&quot; },<br />
      properties = { tag = tags[1][1] } },<br />
<br />
i.e. I put all xterms on tag 1. the thing is, when I&#039;m on any other tag and press mod+enter, I see the xterm flashing very briefly on the current tag, before beeing moved to tag 1.<br />
<br />
I guess the problem is the &quot;manage&quot; signal callback are called in a undeterministic order, and probably the &quot;manage&quot; callback in awful.tag (where c.screen is set) is called before the &quot;manage&quot; callback in awful.rules (where the tag is set).<br />
<br />
This needs to be more flexible (maybe just remove it from awful and put it in rc.lua)</div></div>

  
    <em>
    <a name="comment1498" id="comment1498"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1498">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=18">Zsolt Udvari (uzsolt)</a> -
    Tuesday, 27 October 2009, 17:38 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">I&#039;ve similar problem. But I don&#039;t have idea :)</div></div>

  
    <em>
    <a name="comment1499" id="comment1499"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1499">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=203">Damjan (gdamjan)</a> -
    Tuesday, 27 October 2009, 17:47 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">can you try the second patch I attached to task 659.<br />
<br />
seems to have helped here</div></div>

  
    <em>
    <a name="comment1500" id="comment1500"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1500">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=382">Renato Botelho (rbgarga)</a> -
    Tuesday, 27 October 2009, 17:59 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Didn&#039;t have effect here, problem persists</div></div>

  
    <em>
    <a name="comment1501" id="comment1501"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1501">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=382">Renato Botelho (rbgarga)</a> -
    Tuesday, 27 October 2009, 19:56 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Ops, it has effect, it fixed the problem with firefox popup windows focus \o/, but the first problem i reported no. Thanks</div></div>

  
    <em>
    <a name="comment1502" id="comment1502"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1502">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=365">saucerful (saucerful)</a> -
    Tuesday, 27 October 2009, 20:04 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Problem persists here, too.</div></div>

  
    <em>
    <a name="comment1503" id="comment1503"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1503">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=388">chisiyuan (chisiyuan)</a> -
    Tuesday, 27 October 2009, 22:53 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">I had the same problem with 3.4 too. I tried to remove awful.rules and things went a little better. Now I stay with the perfect 3.3.</div></div>

  
    <em>
    <a name="comment1548" id="comment1548"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1548">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=406">Renato Cant達o (rfcantao)</a> -
    Friday, 27 November 2009, 12:09 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Same (annoying!) problem here. 3.4.1 on Gentoo.</div></div>

  
    <em>
    <a name="comment1549" id="comment1549"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1549">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=406">Renato Cant達o (rfcantao)</a> -
    Friday, 27 November 2009, 12:10 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">By the way, how do I remove awful.rules *and* keep the floating apps floating?</div></div>

  
    <em>
    <a name="comment1566" id="comment1566"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1566">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=395">Hiltjo (bob127)</a> -
    Sunday, 06 December 2009, 15:47 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">The attached patch fixes it for me.</div></div>

      <div class="attachments">
          <a title="0001-Tag-a-client-after-properties-are-set.patch" href="?getfile=258" >
                <img src="https://awesomewm.org/bugs/themes/Bluey/mime/text.png" alt="" title="text/plain" />
            &nbsp;&nbsp;
            0001-Tag-a-client-after-prope...
                  </a>
                  (1.5 KiB)
          <br />
    </div>
  

    <em>
    <a name="comment1568" id="comment1568"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1568">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=382">Renato Botelho (rbgarga)</a> -
    Monday, 07 December 2009, 10:33 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Tested here on 3.4.2, patch fixes the problem! \o/<br />
thank you</div></div>

  
    <em>
    <a name="comment1569" id="comment1569"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1569">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=1">Julien Danjou (jd)</a> -
    Monday, 07 December 2009, 15:27 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">The patch touch awful.tag, and should not.</div></div>

  
    <em>
    <a name="comment1572" id="comment1572"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1572">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=84">anrxc (anrxc)</a> -
    Monday, 07 December 2009, 20:33 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">&gt; The attached patch fixes it for me.<br />
<br />
Cleaner than the last patch I used, thanks EvilBob.<br /></div></div>

  
    <em>
    <a name="comment1596" id="comment1596"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1596">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Friday, 11 December 2009, 19:46 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Uhm, this should be fixed by lazy banning, not? If not, any guess why lazy banning gets defeated?<br /></div></div>

  
    <em>
    <a name="comment1615" id="comment1615"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1615">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=423">Rafael Fonseca (rfonseca)</a> -
    Thursday, 17 December 2009, 01:02 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">I have a similar problem but not just with floaters. If I have enabled setslave on manage signal, when I create a new client it goes to the master column first and I can see it swapping until it reaches its position. awesome v3.4-85-gc4c15db.</div></div>

  
    <em>
    <a name="comment1620" id="comment1620"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1620">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=406">Renato Cant達o (rfcantao)</a> -
    Friday, 18 December 2009, 10:58 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Any improvements about this? Was the patch accepted?</div></div>

  
    <em>
    <a name="comment1665" id="comment1665"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1665">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=289">Uli Schlachter (psychon)</a> -
    Tuesday, 22 December 2009, 14:06 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Anybody took a look at this bug from the C side of things?<br />
<br />
client_manage() (Called when we receive a MapRequest) creates a new client object in banned state (no MapWindow generated) and generates the necessary lua calls.<br />
The only way for a client to actually get mapped is through client_unban().<br />
<br />
The &quot;proper&quot; way for a client to go throught client_unban() is through the lazy banning code in banning.c. If this route is taken, there is no way for flicker to occur because it is only called at the end of awesome&#039;s main loop.<br />
<br />
The other call to client_unban() (which must thus be the one which causes this) is in client_focus_update(). The only call to this which may be responsible is in client_focus() which is called all over the place (I&#039;d guess this call here is caused by &#039;client.focus = c&#039;)<br />
<br />
Wouldn&#039;t it be a better fix to add some kind of &quot;lazy focusing&quot; to the C side of things? Let the lua code do whatever it wants and the C side makes sure to avoid flicker.<br />
<br />
One would just have to change client_focus_update() to only do the lua-side of things and the X stuff (ewmh_update_net_active_window() and client_unban()) is delayed until the end of the main loop.<br />
Oh and one would somehow have to &quot;fix&quot; client_set_focus() to also delay its work until later (Or what happens if one tries to focus an unmapped window X11-wise?).<br />
<br />
Thoughts? Takers? (I guess the answer to the second question will be &quot;psychon&quot;)</div></div>

  
    <em>
    <a name="comment1668" id="comment1668"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1668">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=1">Julien Danjou (jd)</a> -
    Tuesday, 22 December 2009, 14:16 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">&gt; One would just have to change client_focus_update() to only do the lua-side of things and the X stuff (ewmh_update_net_active_window() and client_unban()) is delayed until the end of the main loop.<br />
<br />
This is partially implemented in &#039;next&#039; branch. EWMH update is done via signals.</div></div>

  
    <em>
    <a name="comment1692" id="comment1692"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1692">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=1">Julien Danjou (jd)</a> -
    Monday, 28 December 2009, 10:06 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">FTR, I&#039;ve sent a howto fix this bug on awesome-devel.</div></div>

  
    <em>
    <a name="comment1696" id="comment1696"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1696">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=200">Gregor Best (farhaven)</a> -
    Monday, 28 December 2009, 19:29 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">I splitted off the second part of this bug report into an own report as it was a simple feature request for awful.rules (not even a valid one, see the closing reason for #714).</div></div>

  
    <em>
    <a name="comment1714" id="comment1714"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1714">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=365">saucerful (saucerful)</a> -
    Tuesday, 05 January 2010, 21:17 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">I take it the fix was not merged in 3.4.3? How can I apply the patch to that build?</div></div>

  
    <em>
    <a name="comment1715" id="comment1715"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1715">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=84">anrxc (anrxc)</a> -
    Tuesday, 05 January 2010, 23:22 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">&gt; I take it the fix was not merged in 3.4.3? How can I apply the patch to that build?<br />
<br />
The patch by Hiltjo P. only does small changes to some Lua modules. You can patch awesome prior to building it, but you can also make the changes your self once it is installed. But to answer the question in full;<br />
<br />
If you have a local awesome repo from which you build awesome then all you need is to &quot;git apply&quot; or &quot;git am&quot; the file. If you build awesome from tarballs something like this example would do it: patch -p0 &lt; /path/to/rules-fix.patch</div></div>

  
    <em>
    <a name="comment1716" id="comment1716"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1716">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=365">saucerful (saucerful)</a> -
    Tuesday, 05 January 2010, 23:45 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Great, thanks.</div></div>

  
    <em>
    <a name="comment1717" id="comment1717"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#comment1717">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=1">Julien Danjou (jd)</a> -
    Wednesday, 06 January 2010, 08:38 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">No one send a right patch so this is still not fixed in 3.4.3, yeah.</div></div>

  
  
  </div>
<div id="related" class="tab">
  <table>    <tr><td>
    <form method="post" action="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=664#related" >
        <table id="tasks_related" class="userlist">
        <tr>
          <th>
            <a href="javascript:ToggleSelected('tasks_related')">
              <img title="Toggle Selected" alt="Toggle Selected" src="https://awesomewm.org/bugs/themes/Bluey/kaboodleloop.png" width="16" height="16" />
            </a>
          </th>
          <th>Tasks related to this task (0)</th>
        </tr>
                <tr>
          <td colspan="2">
            <input type="hidden" name="action" value="remove_related" />
            <input type="hidden" name="task_id" value="664" />
            <button type="submit">Remove</button>
          </td>
        </tr>
        </table>
    </form>
    </td><td>
    
    <table id="duplicate_tasks" class="userlist">
        <tr>
          <th>Duplicate tasks of this task (1)</th>
        </tr>
                <tr><td><del>&#160;<a href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=671&amp;opened=365&amp;status%5B0%5D=" title="Duplicate | Floating windows are tiled first | 100%"  class = "closedtasklink">FS#671 - Floating windows are tiled first</a>&#160;</del></td></tr>
            </table>
    </td></tr>
  </table>

  </div>
<div id="history" class="tab">
  <h3>Loading...</h3>
</div>
    </div>
    <p id="footer">
       <!-- Please don't remove this line - it helps promote Flyspray -->
       <a href="http://flyspray.org/" class="offsite">Powered by Flyspray</a>
    </p>
  </div>
  </body>
</html>
