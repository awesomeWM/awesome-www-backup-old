<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-AU" xml:lang="en-AU">
  <head>
    <title>FS#879 : Flash fullscreen not working with bottom wibar</title>

    <meta name="description" content="Flyspray, a Bug Tracking System written in PHP." />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript" />
    <meta http-equiv="Content-Style-Type" content="text/css" />

    <link rel="icon" type="image/png" href="https://awesomewm.org/bugs/themes/Bluey/favicon.ico" />
    <link rel="index" id="indexlink" type="text/html" href="https://awesomewm.org/bugs/" />
        <link media="screen" href="https://awesomewm.org/bugs/themes/Bluey/theme.css" rel="stylesheet" type="text/css" />
    <link media="print"  href="https://awesomewm.org/bugs/themes/Bluey/theme_print.css" rel="stylesheet" type="text/css" />
    <link rel="alternate" type="application/rss+xml" title="Flyspray RSS 1.0 Feed"
          href="https://awesomewm.org/bugs/feed.php?feed_type=rss1&amp;project=1" />
    <link rel="alternate" type="application/rss+xml" title="Flyspray RSS 2.0 Feed"
          href="https://awesomewm.org/bugs/feed.php?feed_type=rss2&amp;project=1" />
	<link rel="alternate" type="application/atom+xml" title="Flyspray Atom 0.3 Feed"
	      href="https://awesomewm.org/bugs/feed.php?feed_type=atom&amp;project=1" />

    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/prototype/prototype.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/script.aculo.us/scriptaculous.js"></script>
            <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/details.js"></script>
                <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/tabs.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/functions.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/calendar_stripped.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/calendar-setup_stripped.js"> </script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/jscalendar/lang/calendar-en.js"></script>
    <script type="text/javascript" src="https://awesomewm.org/bugs/javascript/lightbox/js/lightbox.js"></script>
    <link rel="stylesheet" href="https://awesomewm.org/bugs/javascript/lightbox/css/lightbox.css" type="text/css" media="screen" />
    <!--[if IE]>
    <link media="screen" href="https://awesomewm.org/bugs/themes/Bluey/ie.css" rel="stylesheet" type="text/css" />
    <![endif]-->
      </head>
  <body onload="perms = new Perms('permissions');">

  <div id="container">
    <!-- Remove this to remove the logo -->
    <h1 id="title"><a href="https://awesomewm.org/bugs/">awesome</a></h1>

    <div id="menu">

<form id="login" action="https://awesomewm.org/bugs/index.php?do=authenticate" method="post">
<div>
  <label for="lbl_user_name">Username</label>
  <input class="text" type="text" id="lbl_user_name" name="user_name" size="17" maxlength="30" />

  <label for="lbl_password">Password</label>
  <input class="password" type="password" id="lbl_password" name="password" size="17" maxlength="30" />

  <label for="lbl_remember">Remember me</label>
  <input type="checkbox" id="lbl_remember" name="remember_login" />
  
  <input type="hidden" name="return_to" value="/bugs/index.php?do=details&amp;task_id=879&amp;opened=596&amp;status%5B0%5D=" />

  <button accesskey="l" type="submit">Login!</button>

  <span id="links">
            <a id="forgotlink" href="https://awesomewm.org/bugs/index.php?do=lostpw">Lost password?</a>
      </span>
</div>
</form>
</div>

<div id="pm-menu">

<div id="projectselector">
    <form id="projectselectorform" action="https://awesomewm.org/bugs/index.php" method="get">
       <div>
        <select name="project" onChange="document.getElementById('projectselectorform').submit()">
          <option value="0">All Projects</option>        </select>
        <button type="submit">Switch</button>
        <input type="hidden" name="do" value="details" />
        <input type="hidden" value="1" name="switch" />
              </div>
    </form>
</div>

<ul id="pm-menu-list">
    <li class="first">
      <a id="toplevellink" href="https://awesomewm.org/bugs/index.php?do=toplevel&amp;project=1">Overview</a>
    </li>

    <li>
    <a id="homelink"
        href="https://awesomewm.org/bugs/index.php?project=1&amp;do=index">Tasklist</a>
    </li>

    
    
        <li>
    <a id="roadmaplink"
        href="https://awesomewm.org/bugs/index.php?do=roadmap&amp;project=1">Roadmap</a>
    </li>
    
    
    </ul>
</div>

    
    <div id="content">
      <div id="showtask">
        <form action="https://awesomewm.org/bugs/index.php" method="get">
          <div>
            <button type="submit">Show Task #</button>
            <input id="taskid" name="show_task" class="text" type="text" size="10" accesskey="t" />
          </div>
        </form>
      </div>

      <div class="clear"></div>
            <div id="intromessage">Welcome to awesome bug tracking system.</div>
      <div id="taskdetails">
<span id="navigation">       <a href="https://awesomewm.org/bugs/index.php?project=1&amp;do=index&amp;opened=596&amp;status%5B0%5D=">Tasklist</a>
    </span>

  <h2 class="summary severity2">
	 FS#879 - Flash fullscreen not working with bottom wibar  </h2>

  <div id="fineprint">
	 Attached to Project:
	 <a href="/bugs/index.php?project=1">awesome</a>
	 <br />
	 Opened by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=596">Reza Jelveh (rjzzleep)</a>     	 - Saturday, 19 March 2011, 11:39 GMT 	   </div>

  <table><tr><td id="taskfieldscell">
  <div id="taskfields">
	 <table>
		<tr>
		  <th id="tasktype">Task Type</th>
		  <td headers="tasktype">Bug Report</td>
		</tr>
		<tr>
		  <th id="category">Category</th>
		  <td headers="category">
			 			 Core		  </td>
		</tr>
		<tr>
		  <th id="status">Status</th>
		  <td headers="status">
			 			 Unconfirmed               			 		  </td>
		</tr>
		<tr>
		  <th id="assignedto">Assigned To</th>
		  <td headers="assignedto">
			 			 No-one			 		  </td>
		</tr>
		<tr>
		  <th id="os">Operating System</th>
		  <td headers="os">All</td>
		</tr>
		<tr>
		  <th id="severity">Severity</th>
		  <td headers="severity">Low</td>
		</tr>
		<tr>
		  <th id="priority">Priority</th>
		  <td headers="priority">Normal</td>
		</tr>
		<tr>
		  <th id="reportedver">Reported Version</th>
		  <td headers="reportedver">git/master</td>
		</tr>
		<tr>
		  <th id="dueversion">Due in Version</th>
		  <td headers="dueversion">
			 			 Undecided			 		  </td>
		</tr>
		<tr>
		  <th id="duedate">Due Date</th>
		  <td headers="duedate">
			 Undecided		  </td>
		</tr>
		<tr>
		  <th id="percent">Percent Complete</th>
		  <td headers="percent">
			 <img src="https://awesomewm.org/bugs/themes/Bluey/percent-0.png"
				title="0% complete"
				alt="0%" />
		  </td>
		</tr>
        <tr class="votes">
		  <th id="votes">Votes</th>
		  <td headers="votes">
                    <a href="javascript:showhidestuff('showvotes')">2 </a>
          <div id="showvotes" class="hide">
              <ul class="reports">
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=714">Dan B (NewWorld)</a> (2012-05-25)</li>
                              <li><a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=531">Maarten van Casteren (Maartenvc)</a> (2011-05-26)</li>
                            </ul>
          </div>
                              </td>
        </tr>
        <tr>
		  <th id="private">Private</th>
		  <td headers="private">
                        No            
                      </td>
        </tr>
        	 </table>
  </div>

  </td><td>

  <div id="taskdetailsfull">
	 <h3 class="taskdesc">Details</h3>
     <div id="taskdetailstext">when I set a bottom wibar flash fullscreen (and openoffice presentations notes) will go fullscreen but have start right above the bottom wibar. to get the window to become fullscreen i will then need to use modkey+f twice.</div>

         <div class="attachments">
          <a title="rc.lua" href="?getfile=396" >
                <img src="https://awesomewm.org/bugs/themes/Bluey/mime/text.png" alt="" title="text/plain; charset=us-ascii" />
            &nbsp;&nbsp;
            rc.lua
                  </a>
                  (23.8 KiB)
          <br />
    </div>
  
  </div>

  </td></tr></table>

  <div id="taskinfo">
	 <div id="taskdeps">
		<b>This task depends upon</b>
		<br />
		
		<br class="DoNotPrint" />

		
			 </div>

	 <div id="taskblocks">
        			 </div>
  </div>

  
  <div id="actionbuttons">
	 
	 
	 
	 
	 
	 	   </div>
</div>
<ul id="submenu">
    <li id="commentstab">
  <a href="#comments">Comments (7)</a>
  </li>
  
  <li id="relatedtab">
  <a href="#related">Related Tasks (0/0)</a>
  </li>

  
  </ul>
<div id="comments" class="tab">
    <em>
    <a name="comment2665" id="comment2665"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=879#comment2665">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=531">Maarten van Casteren (Maartenvc)</a> -
    Wednesday, 25 May 2011, 10:24 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">I&#039;ve encountered the same issue in a fresh awesome 3.4.8 install with both a fullscreen youtube video in flash and an attached example GTK application that starts fullscreen.<br />
<br />
The fullscreen app can be compiled with: gcc -Wall -g fullscreen.c -o fullscreen `pkg-config --cflags gtk+-2.0` `pkg-config --libs gtk+-2.0`<br />
<br />
I&#039;ve tested with both fbpanel-6.1 and pypanel. When the app starts it covers all the default awesome widgets at the top, but not fbpanel/pypanel. This app works just fine in KDE and gnome metacity.<br />
<br />
I&#039;ve done some testing with two cases:<br />
<br />
Case 1: gtk_window_fullscreen is called right after gtk_window_new.<br />
Window has the fullscreen property at manage time. Does not correctly cover dock windows.<br />
<br />
Case 2: gtk_window_fullscreen is called after gtk_widget_show_all.<br />
Window does not have the fullscreen property at manage time. Correctly goes fullscreen.<br />
<br />
Any ideas why the area assigned to the window is different in the two cases?<br />
Suggestions for a workaround or how to fix the problem?<br /></div></div>

      <div class="attachments">
          <a title="fullscreen.c" href="?getfile=427" >
                <img src="https://awesomewm.org/bugs/themes/Bluey/mime/text.png" alt="" title="text/x-c; charset=us-ascii" />
            &nbsp;&nbsp;
            fullscreen.c
                  </a>
                  (1.3 KiB)
          <br />
    </div>
  

    <em>
    <a name="comment2666" id="comment2666"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=879#comment2666">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=531">Maarten van Casteren (Maartenvc)</a> -
    Tuesday, 31 May 2011, 08:15 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Attached a new fullscreen.c and a simple Makefile that compiles two binaries: fullscreen-map which sets fullscreen before mapping and fullscreen-resize which sets it after showing the window.<br />
<br />
xwininfo output shows that fullscreen-map&#039;s window actually is the size of the screen (1600x900) but is displaced upwards by 95 pixels, causing part of it to be offscreen. The height of the tested fbpanel is 95 pixels.<br />
<br />
xwininfo: Window id: 0x1000003 &quot;fullscreen-map&quot;<br />
<br />
  Absolute upper-left X:  0<br />
  Absolute upper-left Y:  -95<br />
  Relative upper-left X:  0<br />
  Relative upper-left Y:  -95<br />
  Width: 1600<br />
  Height: 900<br />
  Depth: 24<br />
  Visual: 0x21<br />
  Visual Class: TrueColor<br />
  Border width: 0<br />
  Class: InputOutput<br />
  Colormap: 0x20 (installed)<br />
  Bit Gravity State: NorthWestGravity<br />
  Window Gravity State: NorthWestGravity<br />
  Backing Store State: NotUseful<br />
  Save Under State: no<br />
  Map State: IsViewable<br />
  Override Redirect State: no<br />
  Corners:  +0+-95  -0+-95  -0-95  +0-95<br />
  -geometry 1600x900+0+-95<br />
<br />
Here&#039;s the xwininfo of fullscreen-resize which works as expected.<br />
<br />
xwininfo: Window id: 0x1000003 &quot;fullscreen-resize&quot;<br />
<br />
  Absolute upper-left X:  0<br />
  Absolute upper-left Y:  0<br />
  Relative upper-left X:  0<br />
  Relative upper-left Y:  0<br />
  Width: 1600<br />
  Height: 900<br />
  Depth: 24<br />
  Visual: 0x21<br />
  Visual Class: TrueColor<br />
  Border width: 0<br />
  Class: InputOutput<br />
  Colormap: 0x20 (installed)<br />
  Bit Gravity State: NorthWestGravity<br />
  Window Gravity State: NorthWestGravity<br />
  Backing Store State: NotUseful<br />
  Save Under State: no<br />
  Map State: IsViewable<br />
  Override Redirect State: no<br />
  Corners:  +0+0  -0+0  -0-0  +0-0<br />
  -geometry 1600x900+0+0</div></div>

      <div class="attachments">
          <a title="fullscreen.c" href="?getfile=428" >
                <img src="https://awesomewm.org/bugs/themes/Bluey/mime/text.png" alt="" title="text/x-c; charset=us-ascii" />
            &nbsp;&nbsp;
            fullscreen.c
                  </a>
                  (1.4 KiB)
          <br />
          <a title="Makefile" href="?getfile=429" >
                <img src="https://awesomewm.org/bugs/themes/Bluey/mime/text.png" alt="" title="text/x-makefile; charset=us-ascii" />
            &nbsp;&nbsp;
            Makefile
                  </a>
                  (0.3 KiB)
          <br />
    </div>
  

    <em>
    <a name="comment2667" id="comment2667"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=879#comment2667">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=531">Maarten van Casteren (Maartenvc)</a> -
    Tuesday, 31 May 2011, 11:22 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">Found the culprit:<br />
In rc.lua, the function attached to the manage signal of all clients calls awful.placement.no_overlap. This function removes the areas occupied by floating windows from the available space, then tries to find a space to place the client in. Dock windows such as fbpanel are regarded as floating. Clients that are fullscreen at manage time will be processed by this function, but a client that becomes fullscreen after the manage event does not.<br />
<br />
I solved this by simply not calling the placement functions if a managed client is fullscreen, attached is the patch. (against the awesome 3.4.9 source)<br /></div></div>

      <div class="attachments">
          <a title="no-awful-placement-of-fullscreen-clients.patch" href="?getfile=430" >
                <img src="https://awesomewm.org/bugs/themes/Bluey/mime/text.png" alt="" title="text/x-diff; charset=us-ascii" />
            &nbsp;&nbsp;
            no-awful-placement-of-fullscr...
                  </a>
                  (0.6 KiB)
          <br />
    </div>
  

    <em>
    <a name="comment2699" id="comment2699"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=879#comment2699">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=632">Daniel (quite)</a> -
    Tuesday, 23 August 2011, 13:23 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">This was a tricky and annoying one. Thanks Maarten. Perhaps a merge into the default rc.lua would be advisable?</div></div>

  
    <em>
    <a name="comment2700" id="comment2700"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=879#comment2700">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=630">Arvydas Sidorenko (Asido)</a> -
    Tuesday, 23 August 2011, 16:19 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">I see this thing as a feature. Since my bottom wibox contains all the system status stuff, the ability to see it sometimes in full screen applications is useful.</div></div>

  
    <em>
    <a name="comment2701" id="comment2701"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=879#comment2701">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=632">Daniel (quite)</a> -
    Tuesday, 23 August 2011, 18:30 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">So, whether &quot;fullscreen&quot; will really cover the whole screen or not depends on how it is activated and/or the program. Is that also a feature?</div></div>

  
    <em>
    <a name="comment2703" id="comment2703"
      href="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=879#comment2703">
      <img src="https://awesomewm.org/bugs/themes/Bluey/comment.png"
        title="Link to this comment" alt="" />
    </a>
    Comment by <a href="https://awesomewm.org/bugs/index.php?do=user&amp;area=users&amp;id=531">Maarten van Casteren (Maartenvc)</a> -
    Thursday, 25 August 2011, 07:44 GMT   </em>

  <span class="DoNotPrint">
    
      </span>
  <div class="comment">
    <div class="commenttext">A point that makes me think this can&#039;t be a feature:<br />
When set at manage time, the client still receives fullscreen geometry, but is placed partially outside the viewport to make room for the dock window. In the case of a fullscreen flash video for example, the video isn&#039;t scaled, you only see the lower (screenHeight - dockWindowHeight) pixels of the video.<br />
<br />
If the dock window is desired visible for a certain app that goes fullscreen, unsetting fullscreen and setting maximized-horizontal and maximized-vertical in a rule might work?</div></div>

  
  
  </div>
<div id="related" class="tab">
  <table>    <tr><td>
    <form method="post" action="https://awesomewm.org/bugs/index.php?do=details&amp;task_id=879#related" >
        <table id="tasks_related" class="userlist">
        <tr>
          <th>
            <a href="javascript:ToggleSelected('tasks_related')">
              <img title="Toggle Selected" alt="Toggle Selected" src="https://awesomewm.org/bugs/themes/Bluey/kaboodleloop.png" width="16" height="16" />
            </a>
          </th>
          <th>Tasks related to this task (0)</th>
        </tr>
                <tr>
          <td colspan="2">
            <input type="hidden" name="action" value="remove_related" />
            <input type="hidden" name="task_id" value="879" />
            <button type="submit">Remove</button>
          </td>
        </tr>
        </table>
    </form>
    </td><td>
    
    <table id="duplicate_tasks" class="userlist">
        <tr>
          <th>Duplicate tasks of this task (0)</th>
        </tr>
            </table>
    </td></tr>
  </table>

  </div>
<div id="history" class="tab">
  <h3>Loading...</h3>
</div>
    </div>
    <p id="footer">
       <!-- Please don't remove this line - it helps promote Flyspray -->
       <a href="http://flyspray.org/" class="offsite">Powered by Flyspray</a>
    </p>
  </div>
  </body>
</html>
